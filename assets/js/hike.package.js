hike.require("hike.util.UserAgent",function(e){var c=false;var f=[];var b={transitionIn:function(r,o,l,q,n){var g=o+"-in"+(l?"-reverse":"");r.one("webkitAnimationEnd animationend",q.delegate(n));r.addClass(g);return g;},transitionOut:function(q,o,l,r,n){var g=o+"-out"+(l?"-reverse":"");q.addClass(g);q.one("webkitAnimationEnd animationend",r.delegate(n));}};var a={transitionIn:function(r,o,l,q,n){var g=o+"-in"+(l?"-reverse":"");r.one("webkitAnimationEnd animationend",q.delegate(n));r.addClass(g);return g;},transitionOut:function(o,n,g,q,l){o.css("display","none");q.call(l||this);}};hike.defineClass("hike.fwk.Animation","hike.util.Observable",{statics:{getInstance:function(){if(e.ios||e.android3||e.android4||e.desktop){hike.log.debug("Initialized with StandardProvider");return new hike.fwk.Animation("slide",b);}else{hike.log.debug("Initialized with SimpleProvider");return new hike.fwk.Animation("slide",a);}}},Animation:function(l,g){this.callSuper();this.defaultType=l;this.provider=g;},doTransition:function(r,n,q,s,t){var g=$(r.widget.getElement());var u=n?$(n.widget.getElement()):null;var l=window.innerHeight||$(window).height();if(n!=null){type=(q?n:r).widget.getAnimation()||this.defaultType;}else{type="fade";}g.css("display","block");r.transitionClass=this.provider.transitionIn(g,type,q,function(){if(u!=null){u.css("display","none");u.css("height","0px");}if(s!=undefined){s.call(t||this,r);}},this);if(u!=null){u.removeClass(n.transitionClass);var o=this.provider.transitionOut(u,type,q,function(){u.css("display","none");u.css("height","0px");u.removeClass(o);},this);}}});});hike.defineClass("hike.fwk.Task",{Task:function(b,a,c){this.fn=c;this.context=b;if(a>0){this.start(a);}},start:function(a){var a=a||this.interval;this.interval=setInterval((function(){this.fn.call(this,this.context);}).delegate(this),a);this.fn.call(this,this.context);},stop:function(){clearInterval(this.interval);}});(function(){var b={pushState:function(c,e){},replaceState:function(c,e){},bind:function(e,c){this.callback=e;this.scope=c;$(window).bind("popstate",function(f){f.state;});}};var a={hashStack:[],timestamp:0,pushState:function(e,g){var f="#!"+e;var c={};hike.extend(c,g);f+="?"+hike.util.encodeBase64(hike.util.encodeJson(c));if(this.changing){this.changing=false;return;}this.timestamp=new Date().getTime();if(f!=location.hash){this.pushing=true;location.hash=f;sessionStorage.setItem("History-curr",f);sessionStorage.setItem("History-"+e,"active");hike.log.debug('Set location hash with action "'+e+'"');}},replaceState:function(c,e){},clear:function(){for(var c in sessionStorage){if(c.indexOf("History-")>-1){sessionStorage.setItem(c,"");}}},isActive:function(c){if(sessionStorage.getItem("History-"+c)==""){return false;}else{return true;}},bind:function(e,c){this.callback=e;this.scope=c;$(window).bind("hashchange",this.onHashChange.delegate(this));},getState:function(){var f=location.hash;if(f.indexOf("?")!=-1&&f.indexOf("#!")==0){var e=f.substring(2,f.indexOf("?"));var c=hike.util.decodeJson(hike.util.decodeBase64(f.substring(f.indexOf("?")+1,f.length)));return{action:e,dataset:c};}else{return null;}},setDefaultState:function(c){this.defaultState=c;},onHashChange:function(o){if(this.pushing==true){this.pushing=false;return;}this.changing=true;var n=location.hash;try{var c;if(n.indexOf("?")!=-1&&n.indexOf("#!")==0){var g=n.substring(2,n.indexOf("?"));var f=hike.util.decodeJson(hike.util.decodeBase64(n.substring(n.indexOf("?")+1,n.length)));var c=this.timestamp>f.ts;this.callback.call(this.scope||this,g,f,c);}else{if(this.defaultState!=undefined){var f=this.defaultState;var g=f.action;var l=f.dataset;this.callback.call(this.scope||this,g,l,c);}}}catch(o){hike.log.info("Error during parse location hash: "+o);}}};hike.defineClass("hike.fwk.History","hike.util.Observable",{statics:{getInstance:function(){if(this.instance===undefined){if(history.replaceState&&history.pushState){this.instance=new this(a);}else{this.instance=new this(a);}}return this.instance;}},History:function(c){this.callSuper();this.provider=c;this.provider.bind(this.onStateChange,this);},pushState:function(c,e){this.provider.pushState(c,e);hike.log.debug('Push action "'+c+'" to history');},replaceState:function(c,e){this.provider.replaceState(c,e);},clear:function(){this.provider.clear();},isActive:function(c){return this.provider.isActive(c);},getState:function(){return this.provider.getState();},setDefaultState:function(c){this.provider.setDefaultState(c);},onStateChange:function(e,f,c){this.trigger("statechange",{action:e,dataset:f,reverse:c});}});})();hike.require("hike.fwk.Task",function(a){hike.defineClass("hike.fwk.ModuleLoader",{ModuleLoader:function(b){this.mapping=b;this.actions={};this.tasks={};},load:function(b,g,e){var f;for(var c in this.mapping){if(b.indexOf(c)==0){f=this.mapping[c];}}f=f||this.mapping["*"];hike.loadScript(f+"/"+b+".js",function(){if(typeof g=="function"){g.apply(e||this,arguments);}});},defineAction:function(b,c){this.actions[b]=c;hike.log.debug('Action "'+b+'" has been loaded');},defineTask:function(e,c,b,f){this.tasks[c]=new a(e,b,f);},getAction:function(b,f,c){var e=this.actions;if(b in e){if(typeof f=="function"){f.call(c||this,e[b]);}}else{this.load(b.split(".")[0],function(){if(typeof f=="function"){f.call(c||this,e[b]);}});}},getService:function(b){return this.tasks[b];}});});hike.require("hike.fwk.History",function(a){hike.defineClass("hike.fwk.Executor",{Executor:function(b){this.loader=b;},execute:function(b,f,c,g,e){this.loader.getAction(b,function(l){l(f,c,g?g.delegate(e||this):undefined);c.trigger("afteraction",{action:b,dataset:f});},this);},register:function(b,c){actionMap[b]=c;this.triggerCallback(b,c);}});});(function(a){hike.defineClass("hike.fwk.ViewMgr","hike.util.Observable",{ViewMgr:function(b){this.callSuper();this.builder=b;this.currentView=null;this.viewIdSeq=1;this.viewMapping={};},open:function(c,g,b,e,l,f){if(this.viewMapping[c]!=undefined){c=this.viewMapping[c];}e.trigger("beforeopenview",{viewName:c,dataset:g});this.builder.createView(this.viewIdSeq++,c,g,e,function(n){this.onViewCreated(n,b,e,l,f);},this);},onViewCreated:function(b,e,f,l,g){var c=this.currentView;b.open(e,c,function(n){if(c!=null){c.close();}f.trigger("afteropenview",n);if(typeof l=="function"){l.call(g||this,n);}},this);this.currentView=b;f.trigger("openview",b);},getTopView:function(){return this.currentView;},setViewMapping:function(c,b){this.viewMapping[c]=b;}});})();hike.require("hike.util.Observable","hike.fwk.History",function(c,l){hike.defineClass("hike.fwk.Context","hike.util.Observable",{Context:function(s,r,o){this.service={};for(var q in o){if(q=="*"){this.defaultService=o["*"];}else{this.service[q]=o[q];}}this.callSuper();this.executor=s;this.viewMgr=r;this.interceptors=[];this.requests=[];this.msgListener=new c();this.history=l.getInstance();this.reversing=false;this.viewsInOpen=0;this.items={};this.history.bind("statechange",function(u){var t=u.action;if(!this.history.isActive(t)){return;}this.reversing=u.reverse;this.invokeAction(u.action,u.dataset);},this);},get:function(s,v,u,q){var o,r;for(var t in this.service){if(s.indexOf(t)==0){o=this.service[t];r=s.replace(t+":",o+"/");}}if(o==undefined){o=this.defaultService;r=o+"/"+s;}v=v||{};v.ts=new Date().getTime();n(this,r,s,v,"get",u,q===true);this.getLogger().debug('Get from "'+r+'"');},post:function(s,v,u,q){var o,r;for(var t in this.service){if(s.indexOf(t)==0){o=this.service[t];r=s.replace(t+":",o+"/");}}if(o==undefined){o=this.defaultService;r=o+"/"+s;}n(this,r,s,v,"post",u,q===true);this.purged=false;this.getLogger().debug('Post to "'+r+'"');},openView:function(q,o){this.viewMgr.open(q,o,this.reversing,this);if(this.action!=null&&this.purged){this.history.pushState(this.action.name,this.action.dataset);}},closeView:function(){this.viewMgr.close();},updateView:function(){this.viewMgr.getTopView().update();},invokeAction:function(o,r,s,q){this.reversing=false;this.action={name:o,dataset:r};this.purged=true;this.forward(o,r,s,q);},forward:function(o,r,s,q){this.trigger("beforeaction",{action:o,dataset:r});this.executor.execute(o,r||{},this,s,q);},getLogger:function(){return hike.log;},setItem:function(q,r){var o=this.items[q];this.items[q]=r;this.trigger("change",{name:q,value:r,originValue:o});},getItem:function(o){return this.items[o];},getWidget:function(o){return hike.widget.Widget.get(o);},addRequestInterceptor:function(q,o){this.interceptors.push({pattern:q,handler:o||{}});},clearHistory:function(){this.history.clear();}});var n=function(o,s,r,v,t,u,q){b(new f({context:o,url:s,name:r,params:v,type:t,callbacks:u,silent:q},"before",function(){e(o,this.url,this.name,this.params,this.type,this.callbacks,this.silent);}));};var e=function(o,s,r,v,t,u,q){if(!q){o.trigger("beforerequest",{type:t,data:v,url:s});}$.ajax({type:t,url:s,data:v,headers:{Accept:"application/json"},timeout:30000,success:function(w){try{w=$.parseJSON(w);b(new f({context:o,url:s,name:r,params:v,result:w,type:t,callbacks:u,silent:q},"after",function(){a(this.ctx,this.url,this.result,this.type,this.callbacks,this.silent);}));try{if(!q){o.trigger("afterrequest",{name:r,type:t,data:w,url:s});}}catch(x){hike.log.error(x);}}catch(x){if(!q){o.trigger("afterrequest",{name:r,type:t,data:w,url:s});}hike.log.error(x.stack);}},error:function(x,w){g(o,s,x,t);o.trigger("requesterror",{name:r,type:t,data:x,url:s});}});};var a=function(q,r,u,s,t){if(typeof t=="function"){t.call(u,u);}else{var o=u["status"];if((o+"") in t){t[o].call(u,u);}else{hike.log.error("Unhandled status: "+o+" from "+r);}}hike.log.debug("Request success: "+r);};var g=function(o,q,s,r){hike.log.error("Request error: "+q);};var f=function(o,s,r){for(var q in o){this[q]=o[q];}this.method=s;this.defaultCallback=r;this.pointer=-1;};f.prototype={next:function(){var o=false,r;while((r=this.context.interceptors[++this.pointer])!==undefined){if(r.pattern.test(this.name)){var q=r.handler;if(typeof q[this.method]=="function"){q[this.method](this);return;}}}if(typeof this.defaultCallback=="function"){this.defaultCallback.call(this);}}};var b=function(o){o.next();};});hike.defineClass("hike.fwk.View","hike.util.Observable",{View:function(e,a,c,b){this.callSuper();this.id=e;this.name=a;this.animation=c;this.context=b;this.widgets=[];},open:function(a,c,e,b){this.animation.doTransition(this,c,a===true,function(f){if(typeof e=="function"){e.call(b||this,this);}hike.log.debug("View "+this.name+(a?" reverse in":" opened"));this.trigger("open",this);},this);},close:function(){this.widget.destroy();for(var a=0;a<this.widgets.length;a++){this.widgets[a].destroy();}},update:function(){this.widget.update();},getId:function(){return this.id;},getName:function(){return this.name;},getContext:function(){return this.context;}});hike.defineClass("hike.fwk.ViewBuilder",{createView:hike.emptyMethod});(function(){hike.defineClass("hike.tpl.Loader",{Loader:function(b){this.proxy={};for(var c in b){var a=b[c].proxyUrl;var e=b[c].domain;if(c=="*"){this.defaultProxy=hike.Proxy.getInstance(a,e);}else{this.proxy[c]=hike.Proxy.getInstance(a,e);}}},loadTpl:function(b,g,f){var e,a;for(var c in this.proxy){if(b.indexOf(c)==0){e=this.proxy[c];}}if(e==undefined){e=this.defaultProxy;}e.invoke("loadTemplate",{name:b},function(l){hike.log.debug("Template "+b+" loaded");g.call(f||this,b,l);});}});})();hike.require("hike.widget.Widget","hike.fwk.View",function(a,b){hike.defineClass("hike.tpl.ViewBuilder",{ViewBuilder:function(c,f,e){this.loader=c;this.animation=f;this.container=e||document.body;this.templates={};},createView:function(n,c,g,e,l,f){if(!(c in this.templates)){this.loader.loadTpl(c,function(o,q){this.templates[o]=$.template(o,q);this.createViewByTemplate(n,o,g,e,l,f);},this);}else{this.createViewByTemplate(n,c,g,e,l,f);}},createViewByTemplate:function(e,c,l,f,r,s){var n={};hike.extend(n,l);hike.extend(n,hike.domain);var t=$.tmpl(c,n);if(t.size()!=1){throw'Unexpected element count in view "'+c+'"';}var g=t.get(0);var q=new b(e,c,this.animation,f);var o=this.container;a.enhance(g,q,function(u){o.renderPage(g);q.widget=u;r.call(s||this,q);},this);}});(function(l,o){var D=l.fn.domManip,s="_tmplitem",E=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,z={},n={},I,H={key:0,data:{}},G=0,A=0,q=[];function u(M,L,O,P){var N={data:P||(P===0||P===false)?P:(L?L.data:{}),_wrap:L?L._wrap:null,tmpl:null,parent:L||null,nodes:[],calls:f,nest:e,wrap:x,html:B,update:K};if(M){l.extend(N,M,{nodes:[],parent:L});}if(O){N.tmpl=O;N._ctnt=N._ctnt||N.tmpl(l,N);N.key=++G;(q.length?n:z)[G]=N;}return N;}l.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(L,M){l.fn[L]=function(N){var Q=[],T=l(N),P,R,O,U,S=this.length===1&&this[0].parentNode;I=z||{};if(S&&S.nodeType===11&&S.childNodes.length===1&&T.length===1){T[M](this[0]);Q=this;}else{for(R=0,O=T.length;R<O;R++){A=R;P=(R>0?this.clone(true):this).get();l(T[R])[M](P);Q=Q.concat(P);}A=0;Q=this.pushStack(Q,L,T.selector);}U=I;I=null;l.tmpl.complete(U);return Q;};});l.extend(l.fn,{tmpl:function(N,M,L){return l.tmpl(this[0],N,M,L);},tmplItem:function(){return l.tmplItem(this[0]);},template:function(L){return l.template(L,this[0]);},domManip:function(P,S,R,T){if(P[0]&&l.isArray(P[0])){var M=r(arguments),L=P[0],Q=L.length,N=0,O;while(N<Q&&!(O=l.data(L[N++],"tmplItem"))){}if(O&&A){M[2]=function(U){l.tmpl.afterManip(this,U,R);};}D.apply(this,M);}else{D.apply(this,arguments);}A=0;if(!I){l.tmpl.complete(z);}return this;}});l.extend(l,{tmpl:function(N,Q,P,M){var O,L=!M;if(L){M=H;N=l.template[N]||l.template(null,N);n={};}else{if(!N){N=M.tmpl;z[M.key]=M;M.nodes=[];if(M.wrapped){C(M,M.wrapped);}return l(w(M,null,M.tmpl(l,M)));}}if(!N){return[];}if(typeof Q==="function"){Q=Q.call(M||{});}if(P&&P.wrapped){C(P,P.wrapped);}O=l.isArray(Q)?J(Q,function(R){return R?u(P,M,N,R):null;}):[u(P,M,N,Q)];return L?l(w(M,null,O)):O;},tmplItem:function(M){var L;if(M instanceof l){M=M[0];}while(M&&M.nodeType===1&&!(L=l.data(M,"tmplItem"))&&(M=M.parentNode)){}return L||H;},template:function(M,L){if(L){if(typeof L==="string"){L=v(L);}else{if(L instanceof l){L=L[0]||{};}}if(L.nodeType){L=l.data(L,"tmpl")||l.data(L,"tmpl",v(L.innerHTML));}return typeof M==="string"?(l.template[M]=L):L;}return M?(typeof M!=="string"?l.template(null,M):(l.template[M]||l.template(null,E.test(M)?M:l(M)))):null;},encode:function(L){return(""+L).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;");}});l.extend(l.tmpl,{tag:{"tmpl":{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},"wrap":{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},"each":{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},"html":{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(L){z={};},afterManip:function F(N,L,O){var M=L.nodeType===11?r(L.childNodes):L.nodeType===1?[L]:[];O.call(N,L);y(M);A++;}});function w(L,P,N){var O,M=N?J(N,function(Q){return(typeof Q==="string")?(L.key?Q.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+s+'="'+L.key+'" $2'):Q):w(Q,L,Q._ctnt);}):L;if(P){return M;}M=M.join("");M.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(R,S,Q,T){O=l(Q).get();y(O);if(S){O=c(S).concat(O);}if(T){O=O.concat(c(T));}});return O?O:c(M);}function c(M){var L=document.createElement("div");L.innerHTML=M;return r(L.childNodes);}function v(L){return new Function("$","$item","var $=$,call,__=[],$data=$item.data;"+"with($data){__.push('"+L.trim().replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(T,N,R,O,P,U,Q){var W=l.tmpl.tag[R],M,S,V;if(!W){throw"Unknown template tag: "+R;}M=W._default||[];if(U&&!/\w$/.test(P)){P+=U;U="";}if(P){P=t(P);Q=Q?(","+t(Q)+")"):(U?")":"");S=U?(P.indexOf(".")>-1?P+t(U):("("+P+").call($item"+Q)):P;V=U?S:"(typeof("+P+")==='function'?("+P+").call($item):("+P+"))";}else{V=S=M.$1||"null";}O=t(O);return"');"+W[N?"close":"open"].split("$notnull_1").join(P?"typeof("+P+")!=='undefined' && ("+P+")!=null":"true").split("$1a").join(V).split("$1").join(S).split("$2").join(O||M.$2||"")+"__.push('";})+"');}return __;");}function C(M,L){M._wrap=w(M,true,l.isArray(L)?L:[E.test(L)?L:l(L).html()]).join("");}function t(L){return L?L.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null;}function g(L){var M=document.createElement("div");M.appendChild(L.cloneNode(true));return M.innerHTML;}function y(R){var T="_"+A,M,L,P={},Q,O,N;for(Q=0,O=R.length;Q<O;Q++){if((M=R[Q]).nodeType!==1){continue;}L=M.getElementsByTagName("*");for(N=L.length-1;N>=0;N--){S(L[N]);}S(M);}function S(Z){var W,Y=Z,X,U,V;if((V=Z.getAttribute(s))){while(Y.parentNode&&(Y=Y.parentNode).nodeType===1&&!(W=Y.getAttribute(s))){}if(W!==V){Y=Y.parentNode?(Y.nodeType===11?0:(Y.getAttribute(s)||0)):0;if(!(U=z[V])){U=n[V];U=u(U,z[Y]||n[Y]);U.key=++G;z[G]=U;}if(A){aa(V);}}Z.removeAttribute(s);}else{if(A&&(U=l.data(Z,"tmplItem"))){aa(U.key);z[U.key]=U;Y=l.data(Z.parentNode,"tmplItem");Y=Y?Y.key:0;}}if(U){X=U;while(X&&X.key!=Y){X.nodes.push(Z);X=X.parent;}delete U._ctnt;delete U._wrap;l.data(Z,"tmplItem",U);}function aa(ab){ab=ab+T;U=P[ab]=(P[ab]||u(U,z[U.parent.key+T]||U.parent));}}}var f=function(N,L,O,M){if(!N){return q.pop();}q.push({_:N,tmpl:L,item:this,data:O,options:M});};var e=function(L,N,M){return l.tmpl(l.template(L),N,M,this);};var x=function(N,L){var M=N.options||{};M.wrapped=L;return l.tmpl(l.template(N.tmpl),N.data,M,N.item);};var B=function(M,N){var L=this._wrap;return J(l(l.isArray(L)?L.join(""):L).filter(M||"*"),function(O){return N?O.innerText||O.textContent:O.outerHTML||g(O);});};var K=function(){var L=this.nodes;l.tmpl(null,null,null,this).insertBefore(L[0]);l(L).remove();};var r=function(L){var N=[];for(var M=0;M<L.length;M++){N.push(L[M]);}return N;};var J=function(M,S){var R,P,N=[],O=0,Q=M.length,L=M instanceof l||Q!==o&&typeof Q==="number"&&((Q>0&&M[0]&&M[Q-1])||Q===0||l.isArray(M));if(L){for(;O<Q;O++){R=S(M[O],O);if(R!=null){N[N.length]=R;}}}else{for(P in M){R=S(M[P],P);if(R!=null){N[N.length]=R;}}}return N.concat.apply([],N);};})($);});hike.require("hike.util.UserAgent",function(a){hike.defineClass("hike.widget.PopupMenu","hike.widget.Widget",{PopupMenu:function(f,c){var e='<div class="popup-menu" style="display:none">'+'<div class="arrow"></div>'+"</div>";var b=$(e);b.append(f);$(document.body).append(b);this.callSuper(b.get(0),c);},initElements:function(){this.callSuper();this.anchor=$(this.element).children(".arrow").get(0);},onWindowResize:function(){if(!a.ios&&this.visible){setTimeout(function(){this.anchorTo(this.target);}.delegate(this),150);}},onOrientationChange:function(){if(a.ios&&this.visible){setTimeout(function(){this.anchorTo(this.target);}.delegate(this),100);}},anchorTo:function(g){this.show();var f=this.element;var e=$(f);var c=document.body.clientWidth-this.element.scrollWidth-10;var l=this.getPageTop(g)+g.scrollHeight+1;e.css("left",c+"px");e.css("top",l+"px");var b=this.getPageLeft(g)+(g.scrollWidth/2)-this.getPageLeft(f)-(this.anchor.scrollWidth/2);this.target=g;$(this.anchor).css("left",b+"px");},getPageTop:function(b){var c=0;while(b!=document.body&&b!=null){var e=b.offsetTop;c+=e;b=b.offsetParent;}return c;},getPageLeft:function(b){var c=0;while(b!=document.body&&b!=null){var e=b.offsetLeft;c+=e;b=b.offsetParent;}return c;},onBodyClick:function(b){if(this.withIn(b.target,this.element)){this.hide();}}});});hike.require(function(){hike.defineClass("hike.widget.Button","hike.widget.Tappable",{actived:false,Button:function(b,a){this.callSuper(b,a);},active:function(){this.actived=true;$(this.element).addClass("active");},deactive:function(){this.actived=false;$(this.element).removeClass("active");},onTouchStart:function(a){hike.widget.Tappable.prototype.onTouchStart.call(this,a);this.active();},onTouchIntercepted:function(a){hike.widget.Tappable.prototype.onTouchIntercepted.call(this,a);this.deactive();},onTouchEnd:function(a){hike.widget.Tappable.prototype.onTouchEnd.call(this,a);this.trigger("click",this);this.deactive();}});});hike.require(function(){hike.defineClass("hike.widget.Tappable","hike.widget.Widget",{touching:false,onBodyTouchStart:function(){this.bodyToken=new Date().getTime();},onTouchStart:function(a){if($(this.element).attr("disabled")=="disabled"){this.touching=false;return;}this.touching=true;},onTouchMove:function(b){var a=b.touches?b.touches[0].pageX:b.pageX;var c=b.touches?b.touches[0].pageY:b.pageY;if(Math.abs(a-this.startX)>10||Math.abs(c-this.startY)>10){this.onTouchIntercepted(b);}},onTouchIntercepted:function(a){this.touching=false;},onTouchEnd:function(a){if(this.touching==false){return;}this.touching=false;},onClick:function(g){var b=this.element;var a=this.getContext();this.getContext().element=g.target;var c=b.getDataset()["action"];if(typeof c=="string"&&c.length>0){var f=b.getDataset()["pushHistroy"];if(f==="true"){a.invokeAction(c,b.getDataset(),true);}else{if(f==="false"){a.invokeAction(c,b.getDataset(),false);}else{a.invokeAction(c,b.getDataset());}}g.stopPropagation();}}});});hike.require(function(){hike.defineClass("hike.widget.NewsfeedContent","hike.widget.Widget",{initElements:function(){this.callSuper();this.replaceFace();},replaceFace:function(){var n=["adore","aggre","angry","badly","beatn","beer","nogud","bmile","bomb","borin","call","ctail","coffe","cold","cool","cry","cryin","dspir","dsapt","dsgut","dizzy","money","excla","noexp","fpalm","frown","frust","furis","gigle","happy","hi","hug","hugry","hypno","hstri","idea","impis","kiss","kised","laugh","lOl","monoc","movie","music","nerd","ninja","party","pirat","puden","quesn","rage","rose","sad","satif","scare","shock","sick","sing","sleep","smile","smokn","snoty","sorry","stars","stop","stres","strug","study","suprs","sweat","angel","think","tdown","thmup","waitn","whstl","wink","woo","wnout","yawn"];var f=this.element.innerHTML;var c="";var e=new RegExp("\\[\\w*\\]","g");var g=f.indexOf("[");var o=f.indexOf("]");var a=f.match(e);if(g!=-1&&o!=-1&&null!=a){var l=a.length;for(i=0;i<l;i++){var b=a[i];for(arr in n){if(b=="["+n[arr]+"]"){faceValue="<img src='"+hike.domain.URL_STATIC_UI+"/img/touch/emotion/"+n[arr]+".png'  alt='"+n[arr]+"' width='36' height='36' />";this.element.innerHTML=this.element.innerHTML.replace(b,faceValue);}}}}this.update();},destroy:function(){this.callSuper();}});});hike.require("hike.fwk.History",function(a){var b='<div class="popup">'+'<div class="mask"></div>'+"</div>";hike.defineClass("hike.widget.Dialog","hike.widget.Widget",{statics:{initialize:function(){var c=a.getInstance();c.bind("statechange",this.close,this);},show:function(c,e){this.close();this.dialog=new this(c,e);this.dialog.show();},close:function(){if(this.dialog){this.dialog.close();}delete this.dialog;},lock:function(){this.dialog.lock();},unlock:function(){this.dialog.unlock();}},Dialog:function(o,g){this.config=o;this.context=g;var u=g;var e=$(b);var n=$('<div class="dialog"></div>');e.append(n);if(o.title){var q=$("<header>"+o.title+"</header>");n.append(q);}var l=$("<section></section>");if(o.classname){l.addClass(o.classname);}if(o.content){var t=$('<div class="content">'+o.content+"</div>");l.append(t);}this.locked=o.locked||false;if(o.buttons){var v=$('<div class="buttons"></div>');for(var r=0;r<2;r++){var c;var f='<input data-widget="Button" type="button" value="'+o.buttons[r].text+'"';var s="ok";if(o.buttons[r].text=="Cancel"){s="cancel";}else{if(o.buttons.length==1){s="full";}}f+='class="'+s+' wbtn"';if(o.buttons[r].fn!=null&&o.buttons[r].fn!=""){f+='data-action="'+o.buttons[r].fn+'" />';c=$(f);c.bind("click",function(){var w=this.getDataset();if(w.action!=""&&w.action!=undefined){u.invokeAction(w.action,w);}});}else{f+=" />";c=$(f);c.bind("click",this.close.delegate(this));}v.append(c);if(o.buttons.length==1){break;}}l.append(v);}n.append(l);setTimeout(function(){$mask=e.children(".mask");$mask.bind("mouseup touchend",this.onMaskTouched.delegate(this));}.delegate(this),500);this.$popup=e;this.element=this.$popup.get(0);this.callSuper(this.element,g);},show:function(){$(document.body).append(this.$popup);$(document.body).find(".dialog").css("top","50%");var c=$(document.body).find(".dialog").get(0).offsetHeight;$(document.body).find(".dialog").css("margin-top","-"+c/2+"px");},close:function(){if(this.$popup){this.$popup.remove();delete this.$popup;}},onMaskTouched:function(){if(this.locked){return;}setTimeout(function(){this.close();}.delegate(this),500);},lock:function(){this.locked=true;},unlock:function(){this.locked=false;}});});(function(){var a='<div class="mask"></div>';hike.defineClass("hike.widget.MaskLayer","hike.widget.Widget",{statics:{mask:function(b,c){var c=c||1010;if(!this.layer){this.layer=new this();}this.layer.mask(b,c);},unmask:function(){if(!this.layer){return;}this.layer.unmask();}},MaskLayer:function(){var b=$(a).get(0);$(document.body).append(b);this.callSuper(b);this.counter=0;},mask:function(b,c){this.counter++;$(this.element).html(b||"").show();if(c&&c!=1010){$(this.element).css("z-index",c);}},unmask:function(){if(this.counter==0){return;}this.counter--;if(this.counter==0){$(this.element).hide();}}});})();hike.require("hike.widget.PopupMenu","hike.widget.MaskLayer",function(a,b){hike.defineClass("hike.widget.MenuButton","hike.widget.Widget",{initElements:function(){var c=this.element;this.popupMenu=new a(c.children[0],this.getView());this.callSuper();},onTouchStart:function(c){c.preventDefault();},onTouchEnd:function(c){if(this.stopEvent){return;}this.popupMenu.anchorTo(this.element);this.masked=true;b.mask('<div class="black"></div>');c.stopPropagation();},onBodyTouchEnd:function(c){if(c.withIn(this.element)||this.masked!==true){return;}this.popupMenu.hide();b.unmask();this.masked=false;this.stopEvent=true;setTimeout(function(){this.stopEvent=false;}.delegate(this),500);},destroy:function(){this.callSuper();this.popupMenu.destroy();if(this.masked==true){b.unmask();}}});});hike.require(function(){hike.defineClass("hike.widget.ImageSlider","hike.widget.Widget",{initElements:function(){this.callSuper();this.automatical=true;this.isDraggable=false;setTimeout(function(){this.createContent();}.delegate(this),100);},createContent:function(){this.direction=1;this.img=$(this.element).children("img");this.imgNum=this.img.length;this.ul=$("<ul></ul>");this.selector=$('<div class="selector"></div>');for(var a=0;a<this.imgNum;a++){this.ul.append($("<li></li>").append(this.img[a]));this.selector.append($('<span data-arrow-image = "'+a+'"></span>'));}this.li=this.ul.children("li");$(this.element).append(this.ul);$(this.element).append(this.selector);this.span=$(this.element).find(".selector").children("span");$(this.span[0]).addClass("active");this.calculateContent();},calculateContent:function(){var e=this.selector[0].offsetWidth;var b=0;if(e=="0"){}else{b=-1*e/2+"px";this.selector.css({"width":e+"px"});this.selector.css({"margin-left":b});}var c=document.documentElement.clientWidth;var a=parseInt(300*c/640)+"px";$(this.element).css({"height":a});this.ul.css({"height":a});this.li.css({"height":a});$(this.element).parent("section").css({"height":a});this.li.css({"width":100/this.imgNum+"%"});this.ul.css({"width":this.imgNum*100+"%"});this.img.attr("width","100%");this.img.attr("height","100%");this.currImg=0;this.intervalClear();},intervalClear:function(){if(this.turning){clearInterval(this.turning);}this.turning=setInterval(function(){if(!this.automatical){return;}this.turnImg(this.currImg+1);}.delegate(this),5000);},turnImg:function(a){if(a>this.imgNum-1){a=0;}if(a<0){a=this.imgNum-1;}var b=-100*a;$(this.span[this.currImg]).removeClass("active");$(this.span[a]).addClass("active");this.ul.css({"-webkit-backface-visibility":"hidden","-webkit-transform-style":"preserve-3d","-webkit-transition":"left 350ms ease-out","left":b+"%"});this.currImg=a;this.automatical=true;this.intervalClear();},initImgs:function(a){},initEvents:function(){this.callSuper();setTimeout(function(){this.span.bind("touchend mouseup",this.eventTurnImage.delegate(this));}.delegate(this),200);},onTouchStart:function(a){this.isDraggable=true;clearInterval(this.turning);if(a.targetTouches!=undefined){this.originX=a.targetTouches[0].pageX;}else{this.originX=a.pageX;}a.preventDefault();},onTouchMove:function(a){if(!this.isDraggable){return;}a.preventDefault();},onTouchEnd:function(c){if(!this.isDraggable){return;}this.isDraggable=false;if(c.targetTouches!=undefined){this.endX=c.changedTouches[0].pageX;}else{this.endX=c.pageX;}var b=this.endX-this.originX;if(b>20){this.direction=-1;}else{if(b<-20){this.direction=1;}else{var a=document.createEvent("MouseEvents");a.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);c.target.dispatchEvent(a);return;}}this.turnImg(this.currImg+this.direction);c.preventDefault();},eventTurnImage:function(c){this.automatical=false;var b=c.target;var a=parseInt($(b).data("arrow-image"));this.turnImg(a);c.preventDefault();c.stopPropagation();},destroy:function(){this.callSuper();this.span.unbind("touchend mouseup",this.eventTurnImage.delegate(this));clearInterval(this.turning);}});});hike.require("hike.widget.PopupMenu","hike.widget.MaskLayer",function(a,b){hike.defineClass("hike.widget.NotifyTip","hike.widget.Widget",{initElements:function(){this.callSuper();$(this.element).append('<div class="notify"></div><div class="mail"></div>');this.sumEl=$(this.element).children(".notify").get(0);this.iconEl=$(this.element).children(".mail").get(0);this.initPopupMenu();this.onUserStateChange(this.getContext().getItem("userState"));this.onNotifyChange(this.getContext().getItem("notifys"));},initEvents:function(){this.callSuper();this.getContext().bind("change",this.onContextChange,this);},initPopupMenu:function(){var f=document.createElement("ul");var c=$(f);c.addClass("itemlist");c.addClass("notify");c.append('<li data-widget="Button" data-action="notify.friend">Friends (<span class="count">0</span>)</li>');c.append('<li data-widget="Button" data-action="notify.game">Game (<span class="count">0</span>)</li>');var e=c.find(".count");this.countEl={friend:e.get(0),game:e.get(1)};this.popupMenu=new hike.widget.PopupMenu(f,this.getView());},onTouchStart:function(c){c.preventDefault();},onTouchEnd:function(c){if(this.stopEvent){return;}this.popupMenu.anchorTo(this.iconEl);this.masked=true;b.mask('<div class="black"></div>');c.stopPropagation();},onBodyTouchEnd:function(c){if(c.withIn(this.element)||this.masked!==true){return;}this.popupMenu.hide();b.unmask();this.masked=false;this.stopEvent=true;setTimeout(function(){this.stopEvent=false;}.delegate(this),500);},onContextChange:function(c){var e=c.name;if(e=="notifys"){this.onNotifyChange(c.value);}else{if(e=="userState"){this.onUserStateChange(c.value);}}},onNotifyChange:function(c){var g=0;c=c||{};for(var f in c){g+=c[f];}$(this.sumEl).html(g);if(g==0){$(this.sumEl).css("display","none");}else{$(this.sumEl).css("display","block");}var e=this.countEl;e.friend.innerHTML=c["friendsNum"]||0;e.game.innerHTML=c["gamesNum"]||0;},onUserStateChange:function(c){if(c==null||c==false){this.hideIcon();}else{this.showIcon();}},showIcon:function(){$(this.element).show();},hideIcon:function(){$(this.element).hide();},destroy:function(){this.callSuper();this.popupMenu.destroy();if(this.masked==true){b.unmask();}this.getContext().unbind("change",this.onContextChange,this);}});});hike.require("hike.fwk.View",function(f){window.Element.prototype.getDataset=function(){var o=this;if(o.dataset!=undefined){return o.dataset;}var r={};for(var n=0;n<o.attributes.length;n++){var l=o.attributes[n].name;var q=o.attributes[n].value;if(l.indexOf("data-")==0){var l=l.substring(5,l.length);l=b(l);r[l]=q;}}return r;};window.Event.prototype.withIn=function(n){var l=this.target;do{if(l==n){return true;}l=l.parentNode;}while(l!=null&&l!=document.body);return false;};var a=function(){};var b=function(n){var l=[];for(var o=0;o<n.length;o++){if(n[o]=="-"){o++;l.push(n[o].toUpperCase());}else{l.push(n[o]);}}return l.join("");};var c=function(n){var l="on"+n[0].toUpperCase();l+=n.substring(1,n.length);return l;};var g=function(n,o){for(var l=0;l<o.length;l++){if(o[l]===n){o.splice(l,1);return;}}};var e=function(r,o,q){for(var n=0;n<o.length;n++){var l=o[n];l[r](q);}};hike.defineClass("hike.widget.Widget","hike.util.Observable",{Widget:function(n,l){this.callSuper();this.element=n;if(l instanceof f){this.view=l;this.context=this.view.getContext();}else{this.context=l;}hike.extend(this,n.getDataset());this.initElements();this.initEvents();hike.widget.Widget.register(this);},initElements:function(){this.update();},initEvents:function(){var l=$(this.element);var n=$(document.body);if(this.onTouchStart!=a){l.bind("touchstart mousedown",this.onTouchStart=this.onTouchStart.delegate(this));}if(this.onTouchMove!=a){l.bind("touchmove mousemove",this.onTouchMove=this.onTouchMove.delegate(this));}if(this.onTouchEnd!=a){l.bind("touchend mouseup",this.onTouchEnd=this.onTouchEnd.delegate(this));}if(this.onBodyTouchStart!=a){hike.widget.Widget.handleBodyTouchStart(this);}if(this.onBodyTouchMove!=a){hike.widget.Widget.handleBodyTouchMove(this);}if(this.onBodyTouchEnd!=a){hike.widget.Widget.handleBodyTouchEnd(this);}if(this.onWindowScroll!=a){hike.widget.Widget.handleScroll(this);}if(this.onOrientationChange!=a){hike.widget.Widget.handleOrientationChange(this);}if(this.onWindowResize!=a){hike.widget.Widget.handleWindowResize(this);}if(this.onClick!=a){l.bind("click",this.onClick=this.onClick.delegate(this));}},getAnimation:function(){return $(this.element).data("animation");},getElement:function(){return this.element;},getView:function(){return this.view;},getContext:function(){return this.context;},show:function(){$(this.element).css("display","block");this.visible=true;},hide:function(){$(this.element).css("display","none");this.visible=false;},withIn:function(l,n){do{if(l==n){return true;}l=l.parentNode;}while(l!=null&&l!=document.body);return false;},destroy:function(){if(this.destroyed){return;}if(this.element!=null&&this.element.parentNode!=null){this.element.parentNode.removeChild(this.element);}if(this.onBodyTouchStart!=a){hike.widget.Widget.unHandleBodyTouchStart(this);}if(this.onBodyTouchMove!=a){hike.widget.Widget.unHandleBodyTouchMove(this);}if(this.onBodyTouchEnd!=a){hike.widget.Widget.unHandleBodyTouchEnd(this);}if(this.onWindowScroll!=a){hike.widget.Widget.unHandleScroll(this);}if(this.onOrientationChange!=a){hike.widget.Widget.unHandleOrientationChange(this);}if(this.onWindowResize!=a){hike.widget.Widget.unHandleWindowResize(this);}this.destroyed=true;this.trigger("destroy",this);},trigger:function(n,o){var l=c(n);if(typeof this[l]=="string"){this.getContext().forward(this[l],o);}this.callSuper(n,this);},update:function(){var n=$(this.element).find("[data-action]");n.each(function(o,q){if(q.getDataset()["widget"]==undefined||q.getDataset()["widget"]==""){$(q).data("widget","Tappable");}});var l=$(this.element).find("[data-widget]");l.each(function(o,q){if(q.enhanced){return;}q.enhanced=true;hike.widget.Widget.enhance(q,this.view||this.context,function(r){if(this.view){this.view.widgets.push(r);}},this);}.delegate(this));},isVisible:function(){var l=this.element;do{if(l==document.body){return true;}if(l.style.display=="none"){return false;}l=l.parentNode;}while(l!=null);return false;},onTouchStart:a,onTouchEnd:a,onTouchMove:a,onClick:a,onBodyTouchStart:a,onBodyTouchMove:a,onBodyTouchEnd:a,onWindowScroll:a,onOrientationChange:a,onWindowResize:a,statics:{startTs:new Date().getTime(),endTs:new Date().getTime(),idSeq:0,initialize:function(){this.classes={};this.handlers={touchstart:[],touchmove:[],touchend:[],scroll:[],orientationchange:[],resize:[]};this.widgets={};hike.ready(function(){$(document.body).on("touchstart mousedown",this.onBodyTouchStart.delegate(this));$(document.body).on("touchmove mousemove",this.onBodyTouchMove.delegate(this));$(document.body).on("touchend mouseup",this.onBodyTouchEnd.delegate(this));$(window).on("scroll",this.onWindowScroll.delegate(this));$(window).on("orientationchange",this.onOrientationChange.delegate(this));$(window).on("resize",this.onWindowResize.delegate(this));},this);},register:function(l){l.widgetId=l.widgetId||("widget-"+(this.idSeq++));this.widgets[l.widgetId]=l;},unregister:function(l){delete this.widgets[l.widgetId];},get:function(l){return this.widgets[l];},handleBodyTouchStart:function(l){this.handlers["touchstart"].push(l);},handleBodyTouchMove:function(l){this.handlers["touchmove"].push(l);},handleBodyTouchEnd:function(l){this.handlers["touchend"].push(l);},handleScroll:function(l){this.handlers["scroll"].push(l);},handleOrientationChange:function(l){this.handlers["orientationchange"].push(l);},handleWindowResize:function(l){this.handlers["resize"].push(l);},unHandleBodyTouchStart:function(l){g(l,this.handlers["touchstart"]);},unHandleBodyTouchMove:function(l){g(l,this.handlers["touchmove"]);},unHandleBodyTouchEnd:function(l){g(l,this.handlers["touchend"]);},unHandleScroll:function(l){g(l,this.handlers["scroll"]);},unHandleOrientationChange:function(l){g(l,this.handlers["orientationchange"]);},unHandleWindowResize:function(l){g(l,this.handlers["resize"]);},onBodyTouchStart:function(l){e("onBodyTouchStart",this.handlers["touchstart"],l);},onBodyTouchMove:function(l){e("onBodyTouchMove",this.handlers["touchmove"],l);},onBodyTouchEnd:function(l){e("onBodyTouchEnd",this.handlers["touchend"],l);},onWindowScroll:function(l){e("onWindowScroll",this.handlers["scroll"],l);},onOrientationChange:function(l){e("onOrientationChange",this.handlers["orientationchange"],l);},onWindowResize:function(l){e("onWindowResize",this.handlers["resize"],l);},enhance:function(q,l,t,r){if(q!==undefined){$element=$(q);var n=$element.data("widget");n="hike.widget."+n;if(typeof this.classes[n]=="function"){var s=new this.classes[n](q,l);if(typeof t=="function"){t.call(r||this,s);}}else{var o=this.classes;hike.require(n,function(u){o[n]=u;hike.widget.Widget.enhance(q,l,t,r);});}}},enhanceElements:function(o,n){var l=$(o).find("[data-widget]");l.each(function(q,r){if(r.enhanced){return;}r.enhanced=true;hike.widget.Widget.enhance(r,n);}.delegate(this));}}});});hike.require(function(){hike.defineClass("hike.widget.DataView","hike.widget.Widget",{curPage:1,pageSize:10,loading:false,scrollLoadAll:false,initElements:function(){this.callSuper();this.initButton();},initButton:function(){this.button=$('<div class="loadmore"><span class="load-icon"></span>Loading</div>');$(this.element).append(this.button);},initEvents:function(){this.callSuper();$(this.button).bind("click",this.onButtonClick.delegate(this));if(this.autoLoad!==false){this.onButtonClick();}},onButtonClick:function(){if(this.loading){return;}this.trigger("scrolldata",this);},preload:function(){$(this.button).attr("disabled",true).children(".load-icon").addClass("busy");this.loading=true;},append:function(b,a){if(this.destroyed){return;}$(this.element).children("ul").append(b);this.update();this.curPage++;$(this.button).attr("disabled",false).children(".load-icon").removeClass("busy");if(a===true){this.onFinish();}this.loading=false;this.button.html('<span class="load-icon"></span>Show More');},reset:function(b,a){if(this.destroyed){return;}if(b==undefined||b==""){$(this.element).find("ul").html("");this.update();this.curPage=1;}else{$(this.element).find("ul").html(b);this.update();this.curPage=2;}$(this.button).attr("disabled",false).children(".load-icon").removeClass("busy");if(a===true){this.onFinish();}else{$(this.button).css("display","block");this.button.html('<span class="load-icon"></span>Show More');}this.loading=false;},onFinish:function(){$(this.button).css("display","none");},setHint:function(a){this.reset("<div class='hint'>"+"<div class='tip'>"+a+"</div>"+"<div class='logo'></div>"+"</div>",true);}});});hike.require(function(){hike.defineClass("hike.widget.AddFace","hike.widget.Widget",{initElements:function(){this.callSuper();this.resetDom();this.bottom;this.showtable=false;this.up;this.down;this.tablePage=0;this.spanName;this.tableActive;this.leftMax;this.cssLeft=0;this.isClick=false;this.startX;this.endX;this.textarea=$(this.element).parent().find(".contents").get(0);this.maxlength=$(this.textarea).attr("maxLength");},initEvents:function(){this.callSuper();setTimeout(function(){this.bindClick();}.delegate(this),20);},bindClick:function(){$(".facetable").bind("touchstart mousedown",this.onTableDown=this.onTableDown.delegate(this));$(".facetable").bind("touchend mouseup",this.onTableUp=this.onTableUp.delegate(this));$(".facetable").bind("touchmove mousemove",this.onTableMove=this.onTableMove.delegate(this));},addDom:function(){var o=["adore","aggre","angry","badly","beatn","beer","nogud","bmile","bomb","borin","call","ctail","coffe","cold","cool","cry","cryin","dspir","dsapt","dsgut","dizzy","money","excla","noexp","fpalm","frown","frust","furis","gigle","happy","hi","hug","hugry","hypno","hstri","idea","impis","kiss","kised","laugh","lOl","monoc","movie","music","nerd","ninja","party","pirat","puden","quesn","rage","rose","sad","satif","scare","shock","sick","sing","sleep","smile","smokn","snoty","sorry","stars","stop","stres","strug","study","suprs","sweat","angel","think","tdown","thmup","waitn","whstl","wink","woo","wnout","yawn"];var c=this.element.offsetParent.offsetHeight;var z=this.element.offsetTop;var e=this.element.offsetHeight;var t=parseInt(c)-parseInt(z)-parseInt(e);var v=o.length;var q=Math.ceil(v/(4*8));var y=8*q;var g=100/y;$facetable=$('<table class="facetable" cellspacing="1" cellpadding="0"></table>');var u=$('<div class="faceport"></div>');var n=$('<div class="pagespan"></div>');var f=document.createElement("tr");$facetable.css("width",q+"00%");for(i=0;i<4;i++){var b=document.createElement("tr");$facetable.append(b);for(j=0;j<y;j++){var l=document.createElement("td");l.style.width=g+"%";l.className="facemian";b.appendChild(l);}}for(k=0;k<q;k++){var r=document.createElement("span");if(k==0){r.className="active normal";}else{r.className="normal";}n.append(r);}var s=0;var x='<td colspan="'+y+'" class="pagenum"></td>';f.innerHTML=x;$facetable.append(f);u.append($facetable).append(n);$(this.element).append(u);bottom=t;this.cssLeft=parseInt($facetable.css("left"));this.spanName=document.getElementsByClassName("normal");this.tableActive=this.spanName.length;this.leftMax=(this.tableActive-1)*100;for(p=1;p<=q;p++){for(h=0;h<4;h++){for(d=1;d<=8;d++){var a=(p-1)*8+d-1;var w="<img src='"+hike.domain.URL_STATIC_UI+"/img/touch/emotion/"+o[s]+".png'  alt='["+o[s]+"]'/>";s++;if(s<=v){document.getElementsByTagName("tr")[h].childNodes[a].innerHTML=w;}}}}},resetDom:function(){setTimeout(function(){this.addDom();}.delegate(this),10);},showFace:function(a){if(document.activeElement.tagName=="INPUT"){return;}if(this.showtable==false){this.showUp();}else{this.closeDnow();}a.stopPropagation();a.preventDefault();},showUp:function(){this.showtable=true;$(".faceport").css("visibility","visible");$(".facetable")[0].style.bottom="0px";function a(){$(".pagespan").show();$(".pagespan").find("span")[0].className="active normal";}window.setTimeout(a,1000);},closeDnow:function(){this.showtable=false;this.bottom=$(".facetable")[0].offsetHeight;this.cssLeft=0;this.tablePage=0;$(".facetable")[0].style.bottom=-(this.bottom)+"px";function a(){$(".faceport").css("visibility","hidden");$(".facetable")[0].style.left="0px";$("span.active").removeClass("active");}window.setTimeout(a,1100);$(".pagespan").hide();},changeStyle:function(a){if(a.target.tagName=="IMG"){$(a.target).parent().css("background","#ddd");setTimeout(function(){$(a.target).parent().css("background","");},200);}else{$(a.target).css("background","#ddd");setTimeout(function(){$(a.target).css("background","");},200);}a.preventDefault();},insertFace:function(c){if(c.target.tagName=="IMG"){$(c.target).parent().css("background","");}else{$(c.target).css("background","");}if(document.activeElement.tagName=="INPUT"){return;}var a=$(c.target).html();var b=$(c.target).attr("alt");if(b==null){if(a!=""){b=$(c.target).find("img").attr("alt");this.Insert(b);$(this.textarea).trigger("keyup");}return;}else{b=$(c.target).attr("alt");this.Insert(b);$(this.textarea).trigger("keyup");}return;},tableRight:function(){if(this.cssLeft<=(-this.leftMax)){this.cssLeft=(-this.leftMax);this.tablePage=this.tableActive-1;$facetable.css("left",this.cssLeft+"%");}else{this.cssLeft-=100;this.tablePage++;$facetable.css("left",this.cssLeft+"%");for(m=0;m<this.tableActive;m++){if(m!=this.tablePage){this.spanName[m].className="normal";}else{this.spanName[m].className="active normal";}}}},tableLeft:function(){if(this.cssLeft>=0){this.cssLeft=0;$facetable.css("left",this.cssLeft+"%");}else{this.cssLeft+=100;this.tablePage--;$facetable.css("left",this.cssLeft+"%");for(m=0;m<this.tableActive;m++){if(m!=this.tablePage){this.spanName[m].className="normal";}else{this.spanName[m].className="active normal";}}}},Insert:function(l){var g=this.textarea;if(this.maxlength-6<=$(g).val().length){return;}if(document.selection){var e=document.selection.createRange();document.selection.empty();e.text=l;}else{var c,a,f;c=g.value.substring(0,g.selectionStart);a=g.value.substring(g.selectionStart,g.selectionEnd);f=g.value.substring(g.selectionEnd);g.value=c+l+f;if(g.createTextRange){var b=g.createTextRange();b.collapse(true);b.moveEnd("character",g.value.length-f.length);b.moveStart("character",g.value.length-f.length);b.select();}else{if(g.setSelectionRange){g.focus();g.setSelectionRange(g.value.length-f.length,g.value.length-f.length);}}}},onTableDown:function(a){this.isDrag=true;this.isClick=true;if(a.targetTouches!=undefined){this.startX=a.targetTouches[0].pageX;}else{this.startX=a.pageX;}a.preventDefault();},onTableUp:function(b){if(!this.isDrag){return;}this.isDrag=false;var a=this.endX-this.startX;if(a>100&&this.isClick==false){this.tableLeft();this.isClick==true;}else{if(a<-100&&this.isClick==false){this.tableRight();this.isClick==true;}else{if(this.isClick==true){this.insertFace(b);return;}}}b.preventDefault();},onTableMove:function(a){if(!this.isDrag){return;}if(this.isDrag){this.isClick=false;}if(a.targetTouches!=undefined){this.endX=a.targetTouches[0].pageX;}else{this.endX=a.pageX;}a.preventDefault();},destroy:function(){this.callSuper();}});});hike.require(function(){hike.defineClass("hike.widget.Checkbox","hike.widget.Widget",{initElements:function(){this.actived=false;},initEvents:function(){this.callSuper();if(this.element.getDataset().disabled==undefined){this.disabled=false;}else{this.disabled=this.element.getDataset().disabled;$(this.element).addClass("disable");}if(this.element.getDataset().checked=="true"){this.active();}else{this.deactive();}},active:function(){this.actived=true;$(this.element).addClass("active");},deactive:function(){this.actived=false;$(this.element).removeClass("active");},onTouchStart:function(a){a.preventDefault();},onTouchEnd:function(a){if(this.disabled){return;}if(this.actived){this.deactive();}else{this.active();}},getValue:function(){return this.actived==true?1:0;},destroy:function(){this.callSuper();}});});hike.require("hike.util.UserAgent",function(a){hike.defineClass("hike.widget.WebPage","hike.widget.Widget",{initElements:function(){if(this.pageTitle!=undefined&&this.pageTitle!=""){this.$title=$('<h2 class="page-title">'+this.pageTitle+"</h2>");}this.callSuper();},initEvents:function(){this.callSuper();this.trigger("open",this);},destroy:function(){this.trigger("close",this);this.callSuper();}});var b=function(c){while(c!=null&&c!=document.body&&($(c).data("action")==undefined||$(c).data("action")=="")){c=c.parentNode;}if(c==null||$(c).data("action")==undefined||$(c).data("action")==""){return null;}return c;};});hike.require("hike.widget.MaskLayer",function(a){hike.defineClass("hike.widget.ToolTip","hike.widget.Widget",{statics:{ts:new Date().getTime()},initElements:function(){this.callSuper();this.initLayer();this.touching=false;this.moved=false;this.curX=0;this.curY=0;this.show=false;this.selftouched=false;},initLayer:function(){if($(this.element).children().length>0){this.layer=$('<div class="tooltip" style="position:absolute;display:none"><div class="arrow"></div><div class="inner"></div></div>').get(0);$(this.layer).children(".inner").append($(this.element).children());$(this.element).parent().append($(this.layer));this.hideLayer();}},initEvents:function(){this.callSuper();$(this.element).bind("touchstart mousedown",this.onBodyTouchStart=this.onBodyTouchStart.delegate(this));},onTouchStart:function(b){if((new Date().getTime()-hike.widget.ToolTip.ts)<600){return;}this.selftouched=true;hike.widget.ToolTip.ts=new Date().getTime();b.stopPropagation();},onTouchEnd:function(b){if(this.selftouched){if(this.show){this.hideLayer();}else{$(".mainui .tooltip").hide();this.showLayer();}}this.selftouched=false;b.preventDefault();},onBodyTouchStart:function(b){this.curX=b.touches?b.touches[0].pageX:b.pageX;this.curY=b.touches?b.touches[0].pageY:b.pageY;this.touching=true;},onBodyTouchMove:function(f){if(this.touching){var c=f.touches?f.touches[0].pageX:f.pageX;var b=f.touches?f.touches[0].pageY:f.pageY;if(Math.abs(c-this.curX)>30||Math.abs(b-this.curY)>30){this.moved=true;}}},onBodyTouchEnd:function(b){if(this.touching){if(!this.moved&&!b.withIn(this.element)&&!(b.withIn(this.layer))){this.hideLayer();}this.moved=false;this.touching=false;}},showLayer:function(){if(this.mask=="mask"){a.mask();}var e=this.element;var c=$(this.layer);c.css("display","block");var b=this.getPageLeft(e)-(this.layer.offsetWidth-e.offsetWidth)/2;var f=this.getPageTop(e)+e.offsetHeight;this.show=true;},hideLayer:function(){if(this.mask=="mask"){a.unmask();}$(this.layer).css("display","none");this.show=false;},getPageLeft:function(b){var c=0;do{c+=b.offsetLeft;b=b.offsetParent;}while(b!=null);return c;},getPageTop:function(b){var c=0;do{c+=b.offsetTop;b=b.offsetParent;}while(b.className!="inner");return c-document.documentElement.scrollTop;},destroy:function(){this.callSuper();$(this.layer).remove();}});});hike.require("hike.util.Scroller",function(a){hike.defineClass("hike.widget.TabGroup","hike.widget.Widget",{initElements:function(){this.callSuper();this.startTime,this.endTime,this.startX,this.endX,this.MoveTab=[],this.clientW=this.element.clientWidth,this.spanWidth,this.speed=0.5;this.dragging=false;this.currPage=0;var f=[];var e=0;$(this.element).find("[data-title]").each(function(){f.push($(this).data("title"));});this.widgetId=$(this.element).data("widget-id");var c=this.element.getDataset().activeTab;var b=c?parseInt(c):0;this.direction=0;this.currPage=b;this.currPage=parseInt(this.initState());this.page=f;this.createContent();this.createNavi();this.ct=this.element.parentNode;},createNavi:function(){var f=[],c;for(var e=0,b=this.page.length;e<b;e++){c=this.page[e];f.push("<li><span>"+c+"</span></li>");}this.scroller=$('<div class="scroller"><nav><ul>'+f.join("")+'<div class="clear"></div></ul></nav></div>').get(0);this.nav=$(this.scroller).children("nav").get(0);this.ul=$(this.nav).children("ul");this.li=$(this.ul).children("li");this.span=this.li.children("span");this.anchorTabs(this.currPage);this.pageCount=this.section.size();this.ul.css({"width":(this.pageCount*50)+"%"});this.li.css({"width":(100/this.pageCount)+"%"});$(this.element).prepend(this.scroller);},createContent:function(){this.contentScroller=$('<div class="content-scroller"><div class="content"></div></div>');this.content=this.contentScroller.children(".content");this.content.append($(this.element).children());this.section=this.content.children();$(this.element).prepend(this.contentScroller);this.pageCount=this.section.size();this.content.css({"width":(this.pageCount*100)+"%"});this.section.css({"width":(100/this.pageCount)+"%"});},initEvents:function(){this.callSuper();setTimeout(function(){this.initHeight();}.delegate(this),100);var c=document.documentElement.clientHeight;var b=this.content.get(0).offsetHeight;this.resizeInterval=setInterval(function(){if(document.documentElement.clientHeight!=c){this.resolveSize();c=document.documentElement.clientHeight;}if(this.content.get(0).offsetHeight!=b){this.resolveSize();b=this.content.get(0).offsetHeight;}}.delegate(this),500);},initHeight:function(){var b=this;this.contentScroller.css({height:(this.ct.offsetHeight-this.element.offsetTop-this.scroller.offsetHeight)+"px"});this.content.css({minHeight:(this.ct.offsetHeight-this.element.offsetTop-this.scroller.offsetHeight)+"px"});this.initScroller();},resolveSize:function(){setTimeout(function(){this.contentScroller.css({height:(this.ct.offsetHeight-this.element.offsetTop-this.scroller.offsetHeight)+"px"});if(this.scrollUtil){this.scrollUtil.refresh();}}.delegate(this),50);},initScroller:function(){this.scrollUtil=a.create(this.contentScroller.get(0),{vScroll:true,hScroll:true,hScrollbar:false,vScrollbar:true,bounce:false,momentum:false,lockDirection:true,onBeforeScrollStart:function(b){b.preventDefault();},onScrollStart:this.onScrollStart.delegate(this),onScrollMove:this.onScrollMove.delegate(this),onScrollEnd:this.onScrollEnd.delegate(this)});this.span.each(function(b,c){$(c).bind("click",function(){this.scrollToPage(b,350);}.delegate(this));}.delegate(this));setTimeout(function(){this.content.bind("touchend mouseup",this.scrollerMouseUp.delegate(this));}.delegate(this),200);this.scrollToPage(this.currPage,1);},initState:function(){if(sessionStorage.getItem("tabgrop-"+this.widgetId)!=undefined){return sessionStorage.getItem("tabgrop-"+this.widgetId);}else{return this.pushState(this.currPage);}},pushState:function(c){if(c==""){c=0;}var b=c||0;if(/^widget\-[0-9]?|null$/.test(this.widgetId)){return b;}sessionStorage.setItem("tabgrop-"+this.widgetId,b);return b;},removeState:function(){delete sessionStorage.getItem("tabgrop-"+this.widgetId);},resolveSizeIf:function(c){var b=c.relatedNode;do{if(b==this.content.get(0)){this.scrollUtil.refresh();return;}b=b.parentNode;}while(b!=null&&b!=document.body);},scrollToPage:function(b,c){if(b<0||b>this.page.length-1){return;}this.originPage=this.currPage;this.currPage=b;this.anchorTo(b,c);this.pushState(b);},onScrollStart:function(){this.isdraggable=true;this.direction=0;this.anchoring=false;this.originX=this.scrollUtil.startX;},onScrollMove:function(){if(!this.isdraggable){return;}var c=this.scrollUtil;var b=c.x;var g=c.startX;if(this.direction==0&&b+20<g){this.direction=1;}else{if(this.direction==0&&b>g+20){this.direction=-1;}else{if(this.direction==1&&b>g||this.direction==-1&&b<g){this.direction=0;}}}var f=((b-this.originX)/this.scroller.offsetWidth)/2;this.ul.css({"-webkit-transition":"left 0ms linear",left:(25-this.currPage*50)+(f*100)+"%"});if(this.direction==0){return;}var e=this.currPage;if(e>0){$(this.content.children().get(e-1)).css("height","");}if(e!=this.length-1){$(this.content.children().get(e+1)).css("height","");}},scrollerMouseUp:function(){if(!this.isdraggable){return;}this.isdraggable=false;if(this.direction==0){this.anchorTo(this.currPage);return;}this.originPage=this.currPage;var b=this.currPage;b+=this.direction;this.currPage=Math.max(0,Math.min(b,this.pageCount-1));this.anchorTo(this.currPage);this.direction=0;},refreshScroller:function(){if(this.anchoring){var b=this.currPage;this.content.children().each(function(e,f){if(e!=b){$(f).css("height","1px");}else{$(f).css("height","");}}.delegate(this));if(this.originPage!=undefined&&this.originPage!=this.currPage){var c=this.getContentOffset(b);delete this.originPage;this.scrollUtil.scrollTo(c,0,0);}else{this.scrollUtil.refresh();this.anchoring=false;}}},onScrollEnd:function(){},anchorTo:function(c,b){this.anchoring=true;var e=this.getContentOffset(c);this.scrollUtil.scrollTo(e,this.scrollUtil.y,b||350);this.span.removeClass("smooth");this.span.get(c).className="smooth";this.anchorTabs(c,b);this.pushState(c);setTimeout(function(){this.refreshScroller();}.delegate(this),b||350);},anchorTabs:function(c,b){this.ul.css({"-webkit-transition":"left "+(b||350)+"ms ease-out","left":(25-c*50)+"%"});},getContentOffset:function(b){var c=0;this.section.each(function(e,f){if(e<b){c+=f.offsetWidth;}});return -c;},setTitle:function(b,c){this.span.get(b).innerHTML=c;},destroy:function(){this.callSuper();this.scrollUtil.destroy();delete this.scrollUtil;clearInterval(this.resizeInterval);}});});hike.require(function(){hike.defineClass("hike.widget.ImageSlide","hike.widget.Widget",{index:0,initElements:function(){this.intervalTime=new Number(this.slideInterval);if(this.intervalTime==0){this.intervalTime=3000;}this.callSuper();this.itemIdx=0;this.prevButton=$('<span class="slideArrow pre"></span>').get(0);$(this.prevButton).hide();this.nextButton=$('<span class="slideArrow next"></span>').get(0);if(this.itemTotal<=1){$(this.nextButton).hide();}if(this.itemTotal>1){$(this.element).append(this.prevButton);$(this.element).append(this.nextButton);this.intervalId=window.setInterval(function(){$(this.nextButton).show();this.handleHideAndShow(true);}.delegate(this),this.intervalTime);}},initEvents:function(){this.callSuper();$(this.prevButton).bind("click",this.preveImage.delegate(this));$(this.nextButton).bind("click",this.nextImage.delegate(this));},preveImage:function(){this.handleHideAndShow(false);window.clearInterval(this.intervalId);this.intervalId=window.setInterval(function(){this.handleHideAndShow(true);}.delegate(this),this.intervalTime);},nextImage:function(){this.handleHideAndShow(true);window.clearInterval(this.intervalId);this.intervalId=window.setInterval(function(){this.handleHideAndShow(true);}.delegate(this),this.intervalTime);},handleHideAndShow:function(a){$("#item"+this.itemIdx).hide();if(a){this.itemIdx++;if(this.itemIdx>=this.itemTotal){this.itemIdx=0;}}else{this.itemIdx--;if(this.itemIdx<0){this.itemIdx=this.itemTotal-1;}}if(this.itemIdx==this.itemTotal-1){$(this.nextButton).hide();}else{$(this.nextButton).show();}if(this.itemIdx>0){$(this.prevButton).show();}else{$(this.prevButton).hide();}$("#item"+this.itemIdx).show();},destroy:function(){this.callSuper();$(this.prevButton).remove();$(this.nextButton).remove();window.clearInterval(this.intervalId);}});});hike.require(function(){hike.defineClass("hike.widget.InputText","hike.widget.Widget",{onFocus:function(a){a.preventDefault();},initEvents:function(a){this.callSuper();$(this.element).bind("focus",this.onFocus.delegate(this));},zoomDisable:function(){$("head meta[name=viewport]").remove();$("head").prepend('<meta name="viewport" content="user-scalable=0" />');},zoomEnable:function(){}});});hike.require(function(){hike.defineClass("hike.widget.LoopSlider","hike.widget.Widget",{initElements:function(){this.callSuper();this.perPage=5;this.curPage=1;this.pageCnt=4;},initEvents:function(){this.callSuper();this.holder=$(this.element).children(".holder").get(0);this.slider=$(this.element).children(".holder").children(".slider").get(0);this.updateSlider();this.left.style.webkitTransform="translateX(-"+this.holder.offsetWidth+"px)";this.right.style.webkitTransform="translateX("+this.holder.offsetWidth+"px)";this.getData();},onTouchStart:function(a){this.moving=true;this.startX=a.touches?a.touches[0].pageX:a.pageX;a.preventDefault();},onBodyTouchMove:function(a){if(!this.moving){return;}this.curX=a.touches?a.touches[0].pageX:a.pageX;a.preventDefault();},onBodyTouchEnd:function(a){if(!this.moving){return;}if(Math.abs(this.curX-this.startX)<50){return;}this.turnPage();this.moving=false;},turnPage:function(){if(this.curX<this.startX){$(this.left).remove();$(this.slider).append('<div class="right" style="-webkit-transform:translateX('+this.holder.offsetWidth+'px);"><span></span><span></span><span></span><span></span><span></span></div>');$(this.middle).removeClass("middle").addClass("left");$(this.right).removeClass("right").addClass("middle");this.curPage=(this.curPage<this.pageCnt)?(this.curPage+1):1;}else{$(this.right).remove();$(this.slider).append('<div class="left" style="-webkit-transform:translateX(-'+this.holder.offsetWidth+'px);"><span></span><span></span><span></span><span></span><span></span></div>');$(this.middle).removeClass("middle").addClass("right");$(this.left).removeClass("left").addClass("middle");this.curPage=(this.curPage>1)?(this.curPage-1):this.pageCnt;}this.updateSlider();if(this.curX<this.startX){this.left.style.webkitTransform="translateX(-"+this.holder.offsetWidth+"px)";}else{this.right.style.webkitTransform="translateX("+this.holder.offsetWidth+"px)";}this.middle.style.webkitTransform="translateX(0px)";if($(this.middle).html()=="<span></span><span></span><span></span><span></span><span></span>"||$(this.middle).html()==""){this.getData();}},updateSlider:function(){this.middle=$(this.element).children(".holder").children(".slider").children(".middle").get(0);this.left=$(this.element).children(".holder").children(".slider").children(".left").get(0);this.right=$(this.element).children(".holder").children(".slider").children(".right").get(0);},getData:function(){this.trigger("slidedata",this);},append:function(a){$(this.middle).html("");$(this.middle).append(a);this.update();},destroy:function(){this.callSuper();}});});hike.require(function(){var a={transitionIn:function(g,e,b,f,c){setTimeout(function(){f.call(c);},10);return"";},transitionOut:function(f,e,b,g,c){f.css("display","none");g.call(c||this);}};hike.defineClass("hike.xui.Animation","hike.util.Observable",{statics:{getInstance:function(){return new hike.xui.Animation("slide",a);}},Animation:function(c,b){this.callSuper();this.defaultType=c;this.provider=b;},doTransition:function(c,g,f,o,l){var e=$(c.widget.getElement());var b=g?$(g.widget.getElement()):null;var n=window.innerHeight||$(window).height();if(g!=null){type=(f?g:c).widget.getAnimation()||this.defaultType;}else{type="fade";}e.css("display","block");c.transitionClass=this.provider.transitionIn(e,type,f,function(q){if(b!=null){b.css("display","none");}if(o!=undefined){o.call(l||this,c);}},this);if(b!=null){b.removeClass(g.transitionClass);this.provider.transitionOut(b,type,f,function(){b.css("display","none");},this);}}});});hike.require("hike.fwk.Context","hike.fwk.Executor","hike.fwk.ViewMgr","hike.fwk.ModuleLoader","hike.xui.Animation","hike.fwk.History","hike.tpl.Loader","hike.tpl.ViewBuilder","hike.widget.MaskLayer","hike.util.UserAgent","hike.xui.MainFrame","hike.xui.AppUpdater","hike.util.BIFilter",function(w,g,c,v,E,a,q,s,D,b,t,C,n){var r;var e;var z;var F;var f;var u;var x=function(){D.mask('<div class="loader"></div>');};var o=function(){D.unmask();};var B=function(){D.mask('<div class="recharger">Recharging</div>',1030);};var A=function(){hike.ui.showError("Network connection problem.");};var l=function(G,J){var H=document.getElementsByTagName("head").item(0);var I=document.createElement("link");I.href=G;I.rel="stylesheet";if(J!=undefined){I.media=J;}H.appendChild(I);};var y=function(){var H=document.createElement("meta");H.setAttribute("name","viewport");var G;if(b.ios){G="width=320, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0";}else{if(window.navigator.userAgent.indexOf("HTC")>-1){G="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0;";}else{G="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0; target-densitydpi=device-dpi";}}H.setAttribute("content",G);(document.getElementsByTagName("head").item(0)||document.documentElement).appendChild(H);};hike.defineClass("hike.xui.Launcher",{statics:{launch:function(){y();var H=t.getInstance();r=new v({"payment":hike.domain.URL_SNS_PAY+"/js/modules","*":hike.domain.URL_STATIC_UI+"/js/modules"});e=new g(r);z=E.getInstance();F=new c(new s(new q({"payment":{proxyUrl:hike.domain.URL_SNS_PAY+"/proxy.html",domain:"http://"+hike.domain.DOMAIN_SNS},"*":{proxyUrl:hike.domain.URL_STATIC_UI+"/proxy.html",domain:"http://"+hike.domain.DOMAIN_STATIC}}),z,H));f=new w(e,F,{"payment":hike.domain.URL_SNS_PAY,"*":hike.domain.URL_SNS_TOUCH});f.bind("beforerequest",x,this);f.bind("afterrequest",o,this);f.bind("requesterror",o,this);f.bind("beforeopenview",x,this);f.bind("openview",o,this);f.bind("requesterror",A,this);f.bind("beforerecharging",B,this);f.bind("afterrecharging",o,this);l(hike.domain.URL_STATIC_UI+"/css/touch/mini-dpi.css","screen and (max-width:240px)");l(hike.domain.URL_STATIC_UI+"/css/touch/low-dpi.css","screen and (min-width:241px) and (max-width:399px)");l(hike.domain.URL_STATIC_UI+"/css/touch/medium-dpi.css","screen and (min-width:400px)");u=new n(f,this);hike.ui={showDialog:function(I){hike.require("hike.widget.Dialog",function(J){J.show(I,f);});},closeDialog:function(){hike.require("hike.widget.Dialog",function(I){I.close();});},lockDialog:function(){hike.require("hike.widget.Dialog",function(I){I.lock();});},unlockDialog:function(){hike.require("hike.widget.Dialog",function(I){I.unlock();});},showError:function(J){var I=$('<div class="errortip">'+J+"</div>");$(document.body).append(I);setTimeout(function(){I.css("opacity","100");},50);setTimeout(function(){I.css("opacity","0");},2000);setTimeout(function(){I.remove();},3000);},focus:function(I){setTimeout(function(){H.focusTo(I);},10);}};hike.registerAction=function(I,J){r.defineAction(I,J);};hike.registerRequestInterceptor=function(I,J){f.addRequestInterceptor(I,J);};hike.reigsterViewMapping=function(J,I){F.setViewMapping(J,to);};window.onerror=function(I){hike.log.error(I);};var G=new C(function(){hike.loadScript(hike.domain.URL_STATIC_UI+"/js/hike.modules.js",function(){H.init(document.body,f);var I=a.getInstance().getState();if(I==null){f.invokeAction("home.launch",{});}else{f.forward("home.launch",I);a.timestamp=I.ts;}hike.log.info("Web App started");});});G.update();}}});});hike.require(function(){var a=window.applicationCache;hike.defineClass("hike.xui.AppUpdater",{AppUpdater:function(c,b){this.callback=c;this.scope=b;},update:function(){if(a){if(a.status==a.UPDATEREADY){hike.log.info("AppUpdater detected update ready status");this.onFinishUpdate();return;}else{if(a.status==applicationCache.IDLE||a.status==applicationCache.UNCACHED){hike.log.info("AppUpdater detected idle | obsolete | uncached status");this.onFinishCheck();return;}else{if(a.status==a.DOWNLOADING||a.status==applicationCache.OBSOLETE){this.initUI();}}}this.bindEvent();}else{this.onFinishCheck();}},bindEvent:function(){a.addEventListener("noupdate",this,false);a.addEventListener("updateready",this,false);a.addEventListener("cached",this,false);a.addEventListener("progress",this,false);a.addEventListener("error",this,false);},unbindEvent:function(){a.removeEventListener("noupdate",this);a.removeEventListener("updateready",this);a.removeEventListener("cached",this);a.removeEventListener("progress",this);a.removeEventListener("error",this);},handleEvent:function(b){switch(b.type){case"noupdate":hike.log.info("AppUpdater handle noupdate event");this.onFinishCheck();break;case"updateready":hike.log.info("AppUpdater handle updateready event");this.onFinishUpdate();break;case"cached":hike.log.info("AppUpdater handle cached event");this.onFinishCheck();break;case"progress":this.onUpdateProgress(b.loaded,b.total);break;case"error":hike.log.info("AppUpdater handle error event");this.onFinishCheck();break;}},initUI:function(){var c;var f;var e;if(screen.width<400){c="110px";logoheight="46px";f="130px";e="5px";}else{c="165px";logoheight="69px";f="185px";e="7.5px";}var b="<div style='margin:19% auto 0px auto;width:"+c+";height:"+logoheight+";'><img src='"+hike.domain.URL_STATIC_UI+"/img/touch/welcome-hike.png' width='"+c+"' height='"+logoheight+"' /></div>";b+="<div style='margin-top:9%;text-align:center;text-shadow:0px -1px 0px rgba(0, 0, 0, .4);font-size:1.38em;font-weight:bold;'>Play Games! Make Friends!</div>";b+="<div style='margin:11% auto 0px auto;padding:1px;border-radius:10px;box-shadow:0px 1px 0px rgba(255, 255, 255, .06),0px 1px 0px rgba(0, 0, 0, .5) inset;background:#222;width:"+f+";height:"+e+"'><div class='progressbar' style='border-radius:10px;background:#555;height:100%;width:0%;'></div></div>";this.$ui=$(b);$(document.body).append(this.$ui);},onFinishCheck:function(){if(this.$ui){this.$ui.remove();}if(typeof this.callback=="function"){this.callback.call(this.scope||this);}},onFinishUpdate:function(){a.swapCache();window.location.reload();},onUpdateProgress:function(b,e){if(this.$ui==undefined){this.initUI();}var c=b/e;this.$ui.children(".progressbar").css("width",c*100+"%");}});});hike.require("hike.util.UserAgent","hike.util.Scroller",function(b,c){var r=[/^profile\/comfirm-avata$/,/personal/,/^friend\/\d+\/remove$/,/^notify\/\friend\/\accept$/];var e=[/notify\/friend\/detail/,/notify\/friend\/later/,/notify\/friend\/accept/,/notify\/game\/invite\/detail/,/challenge\/request\/detail/,/challenge\/result\/detail/,/challenge\/request\/later/,/play\//];var f='<div class="controlpanel" style="display:none">'+'<div class="personinfo" data-action="xui.profile.basic-info">'+'<img class="avata"/>'+'<div class="info">'+'<div class="name"></div>'+'<!--div class="statistic">'+'<div><em class="growLevel-count"></em><span>Level</span></div>'+'<div><em class="growScore-count"></em><span>Exp</span></div>'+'<div><em class="balance-count"></em><span>Coins</span></div>'+"</div-->"+"</div>"+"</div>"+'<div class="scroller">'+"<nav>"+'<div class="newbie" data-action="growth.newbie">Newbie Mission<span class="flag"></span></div>'+'<div class="home" data-action="xui.home.openHomepage">Home</div>'+'<div class="friends" data-action="xui.profile.my-friends">My Friends<span class="friends-count cnt"></span></div>'+'<div class="recently-playred-item games" data-action="xui.games.gamelist" data-game-type="recently-played">Recently Played<span class="recently-played-count cnt"></span></div>'+'<ul class="recently-played-list"></ul>'+'<div class="category topage" data-action="xui.games.gamelist" data-game-type="all">All Games</div>'+'<div class="community topage" data-action="xui.forum.home">Game Community</div>'+'<div class="leaderboard topage" data-board-type="overall-leaderboard" data-friend-count="" data-action="xui.games.leaderboard">Leaderboard</div>'+'<div class="search topage" data-action="xui.home.to-search">Search</div>'+'<div class="coin topage" data-action="xui.payment.paymentCenter">HIKE Coins</div>'+'<div class="setting topage" data-action="xui.profile.setting">Settings</div>'+'<div class="logout topage" data-action="xui.home.logoutDialog">Logout</div>'+"</nav>"+"</div>"+"</div>";var g='<div class="notifypanel" style="display:none">'+"<nav>"+'<div class="friends" data-action="xui.notify.friend">Friends<span class="cnt"></span></div>'+'<div class="games-notify-count games" data-action="xui.notify.game">Games<span class="cnt"></span></div>'+'<div class="message" data-action="xui.notify.message">Message<span class="cnt"></span></div>'+"</nav>"+"</div>";var o='<div class="main">'+"<header>"+'<div class="left" data-widget="Button"></div>'+'<div class="hike title"></div>'+'<div class="notify-cnt" style="display:none;"></div>'+'<div class="right" data-widget="Button"></div>'+"</header>"+'<div class="wrapper"><div class="inner"></div></div>';"</div>";var q={slideToolMenuIn:function(u){var t=$(u.mainBody);var s=$(u.slideToolMenu);s.css("zIndex",1);s.css("display","block");t.one("webkitAnimationEnd",function(){t.addClass("docked");}).css({"webkitAnimationName":"open-slide-menu","webkitTransform":"translateX("+u.getLeftMenuPosition()+"px)"});u.resolveSize();},slideToolMenuOut:function(u){var t=$(u.mainBody);var s=$(u.slideToolMenu);t.removeClass("docked");t.css("webkitTransform","translateX(0px)");t.one("webkitAnimationEnd",function(){u.resolveSize();s.css("display","none");}).css("webkitAnimationName","close-slide-menu");},msgMenuIn:function(u){var s=$(u.msgMenu);var t=$(u.mainBody);s.css("zIndex",1);s.css("display","block");t.one("webkitAnimationEnd",function(){t.addClass("docked");}).css({"webkitAnimationName":"open-msg-menu","webkitTransform":"translateX("+u.getRightMenuPosition()+"px)"});u.resolveSize();},msgMenuOut:function(u){var s=$(u.msgMenu);var t=$(u.mainBody);t.removeClass("docked");t.css("webkitTransform","translateX(0px)");t.one("webkitAnimationEnd",function(){u.resolveSize();$(u.msgMenu).css("display","none");}).css("webkitAnimationName","close-msg-menu");}};var a={slideToolMenuIn:function(u){var t=$(u.slideToolMenu);var s=$(u.mainBody);t.css({"zIndex":1,"display":"block"});s.css({"left":u.getLeftMenuPosition()+"px"});u.resolveSize();},slideToolMenuOut:function(u){var t=$(u.slideToolMenu);var s=$(u.mainBody);t.css({"zIndex":0,"display":"none"});s.css({"left":"0px"});u.resolveSize();},msgMenuIn:function(u){var s=$(u.msgMenu);var t=$(u.mainBody);s.css({"zIndex":1,"display":"block"});t.css({"left":u.getRightMenuPosition()+"px"});t.addClass("docked");u.resolveSize();},msgMenuOut:function(u){var s=$(u.msgMenu);var t=$(u.mainBody);s.css({"zIndex":0,"display":"none"});t.css({"left":"0px"});t.removeClass("docked");u.resolveSize();}};var n={"input":true,"textarea":true,"select":true,};var l=function(s){if(s.target.nodeName.toLowerCase() in n){return;}s.preventDefault();};hike.defineClass("hike.xui.MainFrame","hike.widget.Widget",{playing:false,statics:{getInstance:function(){if(!this.instance){this.instance=new hike.xui.MainFrame();}return this.instance;}},MainFrame:function(s){},init:function(t,s){hike.widget.Widget.call(this,t,s);},initElements:function(){var s=$(this.element);if(b.android2){s.addClass("noscroll");}this.slideToolMenu=$(f).get(0);this.msgMenu=$(g).get(0);this.mainBody=$(o).get(0);this.header=$(this.mainBody).children("header").get(0);s.append(this.slideToolMenu);s.append(this.msgMenu);s.append(this.mainBody);$(this.mainBody).children().css("min-width",document.documentElement.clientWidth+"px");if(b.ios||b.android4||b.android3||b.desktop){this.transformer=q;this.initAnimation(this.getLeftMenuPosition(),this.getRightMenuPosition());hike.log.debug("Init MainFrame using AnimationTransformer");}else{this.transformer=a;hike.log.debug("Init MainFrame using SimpleTransformer");}this.callSuper();},initEvents:function(){this.context.bind("change",this.onContextChange,this);this.context.bind("openview",this.onViewOpen,this);this.context.bind("afteropenview",this.afterViewOpen,this);this.context.bind("afterrequest",this.afterRequest,this);var s=this.context.getItem("user");if(s!=null){this.startNotifyTask();}this.initActions();if(b.android2){return;}this.initPageScroll();this.toolScroller=c.create($(this.slideToolMenu).find(".scroller").get(0),{vScrollbar:false,hScroll:false,bounce:b.ios,onBeforeScrollStart:l});$(document).bind("touchmove",function(v){v.preventDefault();});this.resolveSize();var u=document.documentElement.clientHeight;var t=this.getPageContainer().offsetHeight;setInterval(function(){if(document.documentElement.clientHeight!=u||this.getPageContainer().offsetHeight!=t){this.resolveSize();u=document.documentElement.clientHeight;t=this.getPageContainer().offsetHeight;}}.delegate(this),50);},initPageScroll:function(){if(this.scroller!=undefined){this.scroller.refresh();return;}this.scroller=c.create(this.getPageWrapper(),{hScroll:false,bounce:b.ios,onBeforeScrollStart:l});hike.pageScroller=this.scroller;},disablePageScroll:function(){if(this.scroller){this.scroller.disable();}},enablePageScroll:function(){if(this.scroller){this.scroller.enable();}},destroyPageScroll:function(){if(this.scroller==undefined){return;}this.scroller.destroy();delete this.scroller;},refreshPageScroll:function(){if(this.scroller){this.scroller.refresh();}},initActions:function(){this.interceptAction("profile.basic-info");this.interceptAction("home.openHomepage");this.interceptAction("profile.my-friends");this.interceptAction("games.gamelist");this.interceptAction("games.browseGames");this.interceptAction("forum.home");this.interceptAction("games.leaderboard");this.interceptAction("home.to-search");this.interceptAction("payment.paymentCenter");this.interceptAction("profile.setting");this.interceptAction("home.logoutDialog");this.interceptAction("notify.friend");this.interceptAction("notify.game");this.interceptAction("notify.message");this.interceptAction("games.openDetail");hike.registerAction("xui.openMenu",function(u,s){var t=hike.xui.MainFrame.getInstance();t.toggleToolPanel();});hike.registerAction("xui.openNotify",function(u,s){var t=hike.xui.MainFrame.getInstance();t.toggleNotifyPanel();});hike.registerAction("xui.goBack",function(t,s){history.go(-1);});},interceptAction:function(s){hike.registerAction("xui."+s,function(u,t){t.setItem("navigator","xui.openMenu");t.forward(s,u);});},initAnimation:function(s,v){var t=document.createElement("style");document.head.appendChild(t);var u=t.sheet;this.createStyle(u,"open-slide-menu",0,s);this.createStyle(u,"close-slide-menu",s,0);this.createStyle(u,"open-msg-menu",0,v);this.createStyle(u,"close-msg-menu",v,0);},createStyle:function(t,s,v,u){t.insertRule("@-webkit-keyframes "+s+" {"+"from { -webkit-transform: translateX("+v+"px); } "+"to { -webkit-transform: translateX("+u+"px); } "+"}",t.cssRules?t.cssRules.length:0);},resolveSizeIf:function(u){var s=u.relatedNode;do{if(s==this.mainBody){this.resolveSize();return;}s=s.parentNode;}while(s!=null&&s!=document.body);},resolveSize:function(){if(b.android2){var s=this.slideToolMenu.offsetHeight;$(this.getPageContainer()).css({"min-height":this.toolOpened?(s+"px"):""});return;}var t=document.documentElement.clientHeight;var u=window.navigator.standalone;setTimeout(function(){var x=(b.ios?(u?460:t):t)-$(this.element).find(".personinfo").get(0).offsetHeight;var v=this.getPageHeight();$(this.getPageWrapper()).css({height:v+"px"});$($(this.slideToolMenu).find(".scroller").get(0)).css({height:x+"px"});this.toolScroller.refresh();if(this.currentPageEl){var w=this.currentPageEl.getDataset().autoScroll!="disabled";if(w===true){this.initPageScroll();}else{if(w===false){this.destroyPageScroll();$(this.currentPageEl).css({height:v+"px"});}}}setTimeout(function(){},10);}.delegate(this),10);},blockIf:function(){if(this.toolOpened||this.notifyOpened){this.onMainBodyTouchStart=function(s){this.mainBody.bind("touchend",this.onMainBodyTouchEnd=function(){if(this.toolOpened){this.toggleToolPanel();}else{if(this.notifyOpened){this.toggleNotifyPanel();}}}.delegate(this));s.preventDefault();}.delegate(this);$(this.mainBody).bind("touchstart",this.onMainBodyTouchStart);}else{if(this.onMainBodyTouchStart){$(this.mainBody).unbind("touchstart",this.onMainBodyTouchStart);}if(this.onMainBodyTouchEnd){$(this.mainBody).unbind("touchend",this.onMainBodyTouchEnd);}}},onViewOpen:function(){if(this.toolOpened){this.toggleToolPanel();}if(this.notifyOpened){this.toggleNotifyPanel();}},afterViewOpen:function(s){this.onPageRendered(s.widget.element);if(this.scroller!=null){this.scroller.scrollTo(0,0);}},afterRequest:function(s){var t=s.name;for(var u=0;u<r.length;u++){if(r[u].test(t)){this.reloadUserInfo();return;}}for(var v=0;v<e.length;v++){if(e[v].test(t)){this.loadNotify();return;}}},reloadUserInfo:function(){this.context.get("checkuser",{},function(t){var s=t.user;var u=t.flagNewbieMission;this.updateUserInfo(s||{});}.delegate(this));},toggleToolPanel:function(){if(!this.toolOpened){this.transformer.slideToolMenuIn(this);if(this.toolScroller){this.toolScroller.refresh();}}else{this.transformer.slideToolMenuOut(this);}this.toolOpened=!this.toolOpened;},toggleNotifyPanel:function(){if(!this.notifyOpened){this.transformer.msgMenuIn(this);}else{this.transformer.msgMenuOut(this);}this.notifyOpened=!this.notifyOpened;},onContextChange:function(s){if(s.name=="user"){this.updateUserInfo(s.value||{});if(s.value!=null){this.loadNotify();}else{this.stopNotifyTask();}}},getBalance:function(t){var s=this.getContext();$(".balance-count").html(0);s.get("payment:balances",{},(function(u){$(".balance-count").html(u.balance||0);}).delegate(this),true);},stopNotifyTask:function(){window.clearTimeout(this.notifyTimeout);},loadNotify:function(){var s=this.getContext();s.get("notify/home",{},(function(t){this.updateNotify(t.friendsNum,t.gamesNum,t.messagesNum);this.notifyTimeout=window.setTimeout(this.loadNotify.delegate(this),60000);}).delegate(this),true);},updateNotify:function(s,t,u){$(".notifypanel .friends .cnt").html(s);$(".notifypanel .games .cnt").html(t);$(".notifypanel .message .cnt").html(u);if($(".main header .notify-btn").length>0&&s+t+u>0){$(".main header .notify-cnt").html(s+t+u);$(".main header .notify-cnt").show();}else{$(".main header .notify-cnt").hide();}},updateUserInfo:function(s){$(".info .name").html(s.nickname||"");$(".personinfo .avata").attr("src",s.headUrl);$(".friends-count").html(s.friendCount||0);$(".friends-count").html(s.friendCount||0);$(".leaderboard").data("friend-count",s.friendCount||0);$(".recently-played-count").html(s.gameCount||0);var w=$(".recently-played-list");if(s.growLevel==1&&(s.friendCount>=10&&s.gameCount>=5&&s.flagNewbieMission)&&s.mark==0){$(".newbie").addClass("finished");$(".newbie").html("Newbie Mission <span class='flag'></span>");$(".newbie").data("grow-level",s.growLevel);$(".newbie").data("mark",s.mark);$(".newbie").data("user-name",s.nickname);$(".newbie").data("friend-count",s.friendCount);$(".newbie").data("game-count",s.gameCount);$(".newbie").data("flag-newbie-mission",s.flagNewbieMission);$(".newbie").show();}else{if(s.growLevel==1&&s.mark==0){$(".newbie").addClass("finished");$(".newbie").data("grow-level",s.growLevel);$(".newbie").data("user-name",s.nickname);$(".newbie").data("mark",s.mark);$(".newbie").data("friend-count",-1);$(".newbie").data("game-count",-1);$(".newbie").data("flag-newbie-mission",-1);$(".newbie").html("Newbie Mission <span class='flag'></span>");$(".newbie").show();}else{if(s.growLevel>1||s.mark==1){$(".newbie").hide("");}else{$(".newbie").removeClass("finished");$(".newbie").data("grow-level",s.growLevel);$(".newbie").data("mark",s.mark);$(".newbie").data("user-name",s.nickname);$(".newbie").data("friend-count",s.friendCount);$(".newbie").data("game-count",s.gameCount);$(".newbie").data("flag-newbie-mission",s.flagNewbieMission);$(".newbie").show();}}}if(s.gameCount==undefined||s.gameCount==0){w.css("display","none");}else{w.css("display","block");var v=s.recentlyPlayed||[];var u=[];for(var t=0;t<v.length;t++){u.push('<li data-widget="Button" data-action="games.play" data-platform-type="'+v[t].platformType+'" data-game-id="'+v[t].appId+'">'+'<img src="'+hike.domain.URL_STATIC_IMG+"/"+v[t].cover+'"/>'+'<span class="name">'+v[t].title+"</span>"+"</li>");}w.html(u.join(""));}w.children().each(function(y,x){hike.widget.Widget.enhance(x,this.getContext());}.delegate(this));$(".recently-playred-item").attr("disabled",s.gameCount==0?"disabled":"");},getMainBody:function(){return this.mainBody;},getPageWrapper:function(){return $(this.mainBody).find(".wrapper").get(0);},getPageContainer:function(){if(b.android2){return this.getMainBody();}else{return $(this.getPageWrapper()).children(".inner").get(0);}},getLeftMenuPosition:function(){return document.documentElement.clientWidth-this.getSlideOffset();},getRightMenuPosition:function(){return 0-(document.documentElement.clientWidth-this.getSlideOffset());},getPageWidth:function(){return document.documentElement.clientWidth;},getPageHeight:function(){var t=window.navigator.standalone;var s=document.documentElement.clientHeight;return(b.ios?(t?460:s):s)-this.header.offsetHeight;},getSlideOffset:function(){return(window.innerWidth<480||b.ios)?48:72;},onPageRendered:function(t){var u=t.getDataset();var s=this.getContext().getItem("navigator")||u.navigator||"xui.goBack";this.renderHeader({title:u.pageTitle,toolAction:u.toolAction||(s=="xui.openMenu"&&this.isOnline()?"xui.openNotify":undefined),toolClass:u.toolClass||(s=="xui.openMenu"&&this.isOnline()?"notify-btn":undefined),navigator:u.navigator?u.navigator:((u.navigator!="null"&&this.isOnline())?s:null),dataset:u});this.getContext().setItem("navigator",undefined);this.currentPageEl=t;this.resolveSize();},renderPage:function(s){var t=s.getDataset();$(this.getPageContainer()).append(s);$(s).css({minHeight:this.getPageHeight()+"px"});},renderHeader:function(s){var v=this.header.querySelector(".left");var t=this.header.querySelector(".right");var w=this.header.querySelector(".title");$(v).data("action",s.navigator?s.navigator:"");v.className=(s.navigator=="xui.openMenu"?"menu-btn":(s.navigator=="xui.goBack"?"back-btn":""))+" left";$(t).data("action",s.toolAction?s.toolAction:"");t.className=(s.toolClass||"")+" right";var u=s.dataset;t.getDataset=function(){return hike.extend(u,{"action":s.toolAction?s.toolAction:""});};w.className=s.title?"title":"hike title";w.innerHTML=s.title||"";if(s.toolClass=="notify-btn"){this.loadNotify();}else{$(".main header .notify-cnt").hide();}},isOnline:function(){return this.getContext().getItem("user")!=null;},focusTo:function(s){if(this.scroller){this.scroller.scrollToElement(s,100);}else{try{s.focus();}catch(t){}}}});});hike.require("hike.fwk.Context","hike.fwk.Executor","hike.fwk.ViewMgr","hike.fwk.ModuleLoader","hike.fwk.Animation","hike.fwk.History","hike.tpl.Loader","hike.tpl.ViewBuilder","hike.widget.MaskLayer","hike.util.UserAgent",function(t,g,c,s,x,a,o,r,w,b){var q;var e;var v;var y;var f;var u=function(){w.mask('<div class="loader"></div>');};var n=function(){w.unmask();};var l=function(z,C){var A=document.getElementsByTagName("head").item(0);var B=document.createElement("link");B.href=z;B.rel="stylesheet";B.media=C;A.appendChild(B);};hike.defineClass("hike.Launcher",{statics:{launch:function(){q=new s({"payment":hike.domain.URL_SNS_PAY+"/js/modules","*":hike.domain.URL_STATIC_UI+"/js/modules"});e=new g(q);v=x.getInstance();var z=new o({"payment":{proxyUrl:hike.domain.URL_SNS_PAY+"/proxy.html",domain:"http://"+hike.domain.DOMAIN_SNS},"*":{proxyUrl:hike.domain.URL_STATIC_UI+"/proxy.html",domain:"http://"+hike.domain.DOMAIN_STATIC}});y=new c(new r(z,v));f=new t(e,y,{"payment":hike.domain.URL_SNS_PAY,"*":hike.domain.URL_SNS_TOUCH});f.bind("beforerequest",u,this);f.bind("afterrequest",n,this);f.bind("requesterror",n,this);l(hike.domain.URL_STATIC_UI+"/css/touch/background-new.css");l(hike.domain.URL_STATIC_UI+"/css/touch/animation.css");l(hike.domain.URL_STATIC_UI+"/css/touch/frame-low.css","screen and (max-width:479px)");l(hike.domain.URL_STATIC_UI+"/css/touch/frame.css","screen and (min-width:480px)");l(hike.domain.URL_STATIC_UI+"/css/touch/payment-low.css","screen and (max-width:479px)");l(hike.domain.URL_STATIC_UI+"/css/touch/payment.css","screen and (min-width:480px)");hike.ui={showDialog:function(B){hike.require("hike.widget.Dialog",function(C){C.show(B,f);});},closeDialog:function(){hike.require("hike.widget.Dialog",function(B){B.close();});}};hike.registerAction=function(B,C){q.defineAction(B,C);};hike.registerTask=function(C,B,D){q.defineTask(f,C,B,D);};window.onerror=function(B){hike.log.error(B);};q.load("topic");q.load("games");q.load("home");q.load("profile");q.load("notify");q.load("friend");q.load("forum");var A=a.getInstance().getState();if(A==null){f.invokeAction("home.launch",{});}else{f.forward("home.launch",A);a.timestamp=A.ts;}hike.log.info("Web App started");}}});});hike.defineClass("hike.util.BIFilter",{BIFilter:function(a){a.bind("afteraction",this.sendBI,this);},sendBI:function(f){var n="";var o="30";var r="";if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)||/MSIE(\d+\.\d+);/.test(navigator.userAgent)){}else{r=location.href;}var e=window.location.host+".h";var b="";var s=f.action;var c="";if(n.length>0){c=n;}var l="";var a="passport"+hike.domain.ROOT_DOMAIN;var q=this.getCookie(a);l=q!=null?q:l;var g=document.getElementById("gummyStateImg");if(!g){var g=document.createElement("img");g.id="gummyStateImg";g.style.display="none";g.src="http://"+hike.domain.DOMAIN_STAT+"/stat.gif?utmac="+o+"&utmcc="+l+"&utmhn="+e+"&utmp="+s+"&utmpa="+b+"&utmr="+r+"&utfr="+c+"&utmn="+Math.random();document.getElementsByTagName("body")[0].appendChild(g);}else{g.src="http://"+hike.domain.DOMAIN_STAT+"/stat.gif?utmac="+o+"&utmcc="+l+"&utmhn="+e+"&utmp="+s+"&utmpa="+b+"&utmr="+r+"&utfr="+c+"&utmn="+Math.random();}},getCookie:function(c){var b=document.cookie;c+="=";var f=0;while(f<b.length){var l=f+c.length;if(b.substring(f,l)==c){var g=b.indexOf(";",l);if(g==-1){g=b.length;}var a=unescape(b.substring(l,g));a=a.replace(new RegExp('"',"gm"),"");if(a!=null){var e=a.split(":");if(e.length>0){a=e[0];}}return a;}f=b.indexOf(" ",f)+1;if(f==0){break;}}return null;}});hike.defineClass("hike.util.UserAgent",{statics:{initialize:function(){var a=navigator.userAgent.toLowerCase();this.android=/android/.test(a);this.android2=/android 2/.test(a);this.android3=/android 3/.test(a);this.android4=/android 4/.test(a);this.ipad=/ipad/.test(a);this.iphone=/iphone/.test(a);this.ios=this.ipad||this.iphone;this.desktop=/windows/.test(a);}}});(function(){var a=function(b){this.name=b;this.listeners=[];};a.prototype={getName:function(){return this.name;},addListener:function(c,b){this.listeners.push({fn:c,scope:b});},removeListener:function(f,e){for(var c=0;c<this.listeners.length;){var b=this.listeners[c];if(b.fn==f&&(e===undefined||b.scope==e)){this.listeners.splice(c,1);}else{c++;}}},trigger:function(e){for(var c=0;c<this.listeners.length;c++){var b=this.listeners[c];if(b.fn.call(b.scope||this,e)===false){return false;}}return true;}};hike.defineClass("hike.util.Observable",{Observable:function(){this.events={};},addListener:function(b,e,c){if(this.events[b]==undefined){this.events[b]=new a(b);}this.events[b].addListener(e,c);},removeListener:function(b,e,c){if(this.events[b]!=undefined){this.events[b].removeListener(e,c);}},trigger:function(b,c){if(this.events[b]!=undefined){this.events[b].trigger(c);}},bind:function(b,e,c){this.addListener(b,e,c);},unbind:function(b,e,c){this.removeListener(b,e,c);}});})();(function(o,L){var B=Math,t=L.createElement("div").style,G=(function(){var P="t,webkitT,MozT,msT,OT".split(","),O,N=0,M=P.length;for(;N<M;N++){O=P[N]+"ransform";if(O in t){return P[N].substr(0,P[N].length-1);}}return false;})(),K=G?"-"+G.toLowerCase()+"-":"",s=y("transform"),E=y("transitionProperty"),r=y("transitionDuration"),u=y("transformOrigin"),I=y("transitionTimingFunction"),f=y("transitionDelay"),H=(/android/gi).test(navigator.appVersion),n=(/iphone|ipad/gi).test(navigator.appVersion),x=(/hp-tablet/gi).test(navigator.appVersion),q=y("perspective") in t,F="ontouchstart" in o&&!x,e=!!G,g=y("transition") in t,l="onorientationchange" in o?"orientationchange":"resize",b=F?"touchstart":"mousedown",z=F?"touchmove":"mousemove",c=F?"touchend":"mouseup",D=F?"touchcancel":"mouseup",A=G=="Moz"?"DOMMouseScroll":"mousewheel",a=(function(){if(G===false){return false;}var M={"":"transitionend","webkit":"webkitTransitionEnd","Moz":"transitionend","O":"oTransitionEnd","ms":"MSTransitionEnd"};return M[G];})(),w=(function(){return o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||o.oRequestAnimationFrame||o.msRequestAnimationFrame||function(M){return setTimeout(M,1);};})(),v=(function(){return o.cancelRequestAnimationFrame||o.webkitCancelAnimationFrame||o.webkitCancelRequestAnimationFrame||o.mozCancelRequestAnimationFrame||o.oCancelRequestAnimationFrame||o.msCancelRequestAnimationFrame||clearTimeout;})(),J=q?" translateZ(0)":"",C=function(O,M){var P=this,N;P.wrapper=typeof O=="object"?O:L.getElementById(O);P.wrapper.style.overflow="hidden";P.scroller=P.wrapper.children[0];P.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,handleClick:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:H,hideScrollbar:n,fadeScrollbar:n&&q,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(Q){Q.preventDefault();},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(N in M){P.options[N]=M[N];}P.x=P.options.x;P.y=P.options.y;P.options.useTransform=e&&P.options.useTransform;P.options.hScrollbar=P.options.hScroll&&P.options.hScrollbar;P.options.vScrollbar=P.options.vScroll&&P.options.vScrollbar;P.options.zoom=P.options.useTransform&&P.options.zoom;P.options.useTransition=g&&P.options.useTransition;if(P.options.zoom&&H){J="";}P.scroller.style[E]=P.options.useTransform?K+"transform":"top left";P.scroller.style[r]="0";P.scroller.style[u]="0 0";if(P.options.useTransition){P.scroller.style[I]="cubic-bezier(0.33,0.66,0.66,1)";}if(P.options.useTransform){P.scroller.style[s]="translate("+P.x+"px,"+P.y+"px)"+J;}else{P.scroller.style.cssText+=";position:absolute;top:"+P.y+"px;left:"+P.x+"px";}if(P.options.useTransition){P.options.fixedScrollbar=true;}P.refresh();P._bind(l,o);P._bind(b);if(!F){P._bind("mouseout",P.wrapper);if(P.options.wheelAction!="none"){P._bind(A);}}if(P.options.checkDOMChanges){P.checkDOMTime=setInterval(function(){P._checkDOMChanges();},500);}};C.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(N){var M=this;switch(N.type){case b:if(!F&&N.button!==0){return;}M._start(N);break;case z:M._move(N);break;case c:case D:M._end(N);break;case l:M._resize();break;case A:M._wheel(N);break;case"mouseout":M._mouseout(N);break;case a:M._transitionEnd(N);break;}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)){return;}this.refresh();},_scrollbar:function(M){var O=this,N;if(!O[M+"Scrollbar"]){if(O[M+"ScrollbarWrapper"]){if(e){O[M+"ScrollbarIndicator"].style[s]="";}O[M+"ScrollbarWrapper"].parentNode.removeChild(O[M+"ScrollbarWrapper"]);O[M+"ScrollbarWrapper"]=null;O[M+"ScrollbarIndicator"]=null;}return;}if(!O[M+"ScrollbarWrapper"]){N=L.createElement("div");if(O.options.scrollbarClass){N.className=O.options.scrollbarClass+M.toUpperCase();}else{N.style.cssText="position:absolute;z-index:100;"+(M=="h"?"height:7px;bottom:1px;left:2px;right:"+(O.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(O.hScrollbar?"7":"2")+"px;top:2px;right:1px");}N.style.cssText+=";pointer-events:none;"+K+"transition-property:opacity;"+K+"transition-duration:"+(O.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(O.options.hideScrollbar?"0":"1");O.wrapper.appendChild(N);O[M+"ScrollbarWrapper"]=N;N=L.createElement("div");if(!O.options.scrollbarClass){N.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+K+"background-clip:padding-box;"+K+"box-sizing:border-box;"+(M=="h"?"height:100%":"width:100%")+";"+K+"border-radius:3px;border-radius:3px";}N.style.cssText+=";pointer-events:none;"+K+"transition-property:"+K+"transform;"+K+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+K+"transition-duration:0;"+K+"transform: translate(0,0)"+J;if(O.options.useTransition){N.style.cssText+=";"+K+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)";}O[M+"ScrollbarWrapper"].appendChild(N);O[M+"ScrollbarIndicator"]=N;}if(M=="h"){O.hScrollbarSize=O.hScrollbarWrapper.clientWidth;O.hScrollbarIndicatorSize=B.max(B.round(O.hScrollbarSize*O.hScrollbarSize/O.scrollerW),8);O.hScrollbarIndicator.style.width=O.hScrollbarIndicatorSize+"px";O.hScrollbarMaxScroll=O.hScrollbarSize-O.hScrollbarIndicatorSize;O.hScrollbarProp=O.hScrollbarMaxScroll/O.maxScrollX;}else{O.vScrollbarSize=O.vScrollbarWrapper.clientHeight;O.vScrollbarIndicatorSize=B.max(B.round(O.vScrollbarSize*O.vScrollbarSize/O.scrollerH),8);O.vScrollbarIndicator.style.height=O.vScrollbarIndicatorSize+"px";O.vScrollbarMaxScroll=O.vScrollbarSize-O.vScrollbarIndicatorSize;O.vScrollbarProp=O.vScrollbarMaxScroll/O.maxScrollY;}O._scrollbarPos(M,true);},_resize:function(){var M=this;setTimeout(function(){M.refresh();},H?200:0);},_pos:function(M,N){if(this.zoomed){return;}M=this.hScroll?M:0;N=this.vScroll?N:0;if(this.options.useTransform){this.scroller.style[s]="translate("+M+"px,"+N+"px) scale("+this.scale+")"+J;}else{M=B.round(M);N=B.round(N);this.scroller.style.left=M+"px";this.scroller.style.top=N+"px";}this.x=M;this.y=N;this._scrollbarPos("h");this._scrollbarPos("v");},_scrollbarPos:function(M,P){var O=this,Q=M=="h"?O.x:O.y,N;if(!O[M+"Scrollbar"]){return;}Q=O[M+"ScrollbarProp"]*Q;if(Q<0){if(!O.options.fixedScrollbar){N=O[M+"ScrollbarIndicatorSize"]+B.round(Q*3);if(N<8){N=8;}O[M+"ScrollbarIndicator"].style[M=="h"?"width":"height"]=N+"px";}Q=0;}else{if(Q>O[M+"ScrollbarMaxScroll"]){if(!O.options.fixedScrollbar){N=O[M+"ScrollbarIndicatorSize"]-B.round((Q-O[M+"ScrollbarMaxScroll"])*3);if(N<8){N=8;}O[M+"ScrollbarIndicator"].style[M=="h"?"width":"height"]=N+"px";Q=O[M+"ScrollbarMaxScroll"]+(O[M+"ScrollbarIndicatorSize"]-N);}else{Q=O[M+"ScrollbarMaxScroll"];}}}O[M+"ScrollbarWrapper"].style[f]="0";O[M+"ScrollbarWrapper"].style.opacity=P&&O.options.hideScrollbar?"0":"1";O[M+"ScrollbarIndicator"].style[s]="translate("+(M=="h"?Q+"px,0)":"0,"+Q+"px)")+J;},_start:function(S){var R=this,N=F?S.touches[0]:S,O,M,T,Q,P;if(!R.enabled){return;}if(R.options.onBeforeScrollStart){R.options.onBeforeScrollStart.call(R,S);}if(R.options.useTransition||R.options.zoom){R._transitionTime(0);}R.moved=false;R.animating=false;R.zoomed=false;R.distX=0;R.distY=0;R.absDistX=0;R.absDistY=0;R.dirX=0;R.dirY=0;if(R.options.zoom&&F&&S.touches.length>1){Q=B.abs(S.touches[0].pageX-S.touches[1].pageX);P=B.abs(S.touches[0].pageY-S.touches[1].pageY);R.touchesDistStart=B.sqrt(Q*Q+P*P);R.originX=B.abs(S.touches[0].pageX+S.touches[1].pageX-R.wrapperOffsetLeft*2)/2-R.x;R.originY=B.abs(S.touches[0].pageY+S.touches[1].pageY-R.wrapperOffsetTop*2)/2-R.y;if(R.options.onZoomStart){R.options.onZoomStart.call(R,S);}}if(R.options.momentum){if(R.options.useTransform){O=getComputedStyle(R.scroller,null)[s].replace(/[^0-9\-.,]/g,"").split(",");M=O[4]*1;T=O[5]*1;}else{M=getComputedStyle(R.scroller,null).left.replace(/[^0-9-]/g,"")*1;T=getComputedStyle(R.scroller,null).top.replace(/[^0-9-]/g,"")*1;}if(M!=R.x||T!=R.y){if(R.options.useTransition){R._unbind(a);}else{v(R.aniTime);}R.steps=[];R._pos(M,T);}}R.absStartX=R.x;R.absStartY=R.y;R.startX=R.x;R.startY=R.y;R.pointX=N.pageX;R.pointY=N.pageY;R.startTime=S.timeStamp||Date.now();if(R.options.onScrollStart){R.options.onScrollStart.call(R,S);}R._bind(z);R._bind(c);R._bind(D);},_move:function(U){var S=this,V=F?U.touches[0]:U,Q=V.pageX-S.pointX,O=V.pageY-S.pointY,M=S.x+Q,X=S.y+O,R,P,N,T=U.timeStamp||Date.now();if(S.options.onBeforeScrollMove){S.options.onBeforeScrollMove.call(S,U);}if(S.options.zoom&&F&&U.touches.length>1){R=B.abs(U.touches[0].pageX-U.touches[1].pageX);P=B.abs(U.touches[0].pageY-U.touches[1].pageY);S.touchesDist=B.sqrt(R*R+P*P);S.zoomed=true;N=1/S.touchesDistStart*S.touchesDist*this.scale;if(N<S.options.zoomMin){N=0.5*S.options.zoomMin*Math.pow(2,N/S.options.zoomMin);}else{if(N>S.options.zoomMax){N=2*S.options.zoomMax*Math.pow(0.5,S.options.zoomMax/N);}}S.lastScale=N/this.scale;M=this.originX-this.originX*S.lastScale+this.x,X=this.originY-this.originY*S.lastScale+this.y;this.scroller.style[s]="translate("+M+"px,"+X+"px) scale("+N+")"+J;if(S.options.onZoom){S.options.onZoom.call(S,U);}return;}S.pointX=V.pageX;S.pointY=V.pageY;if(M>0||M<S.maxScrollX){M=S.options.bounce?S.x+(Q/2):M>=0||S.maxScrollX>=0?0:S.maxScrollX;}if(X>S.minScrollY||X<S.maxScrollY){X=S.options.bounce?S.y+(O/2):X>=S.minScrollY||S.maxScrollY>=0?S.minScrollY:S.maxScrollY;}S.distX+=Q;S.distY+=O;S.absDistX=B.abs(S.distX);S.absDistY=B.abs(S.distY);if(S.absDistX<6&&S.absDistY<6){return;}if(S.options.lockDirection){if((S.dir==undefined&&S.absDistX>S.absDistY+6)||S.dir=="h"){X=S.y;O=0;S.dir="h";}else{if((S.dir==undefined&&S.absDistY>S.absDistX+6)||S.dir=="v"){M=S.x;Q=0;S.dir="v";}}}S.moved=true;S._pos(M,X);S.dirX=Q>0?-1:Q<0?1:0;S.dirY=O>0?-1:O<0?1:0;if(T-S.startTime>300){S.startTime=T;S.startX=S.x;S.startY=S.y;}if(S.options.onScrollMove){S.options.onScrollMove.call(S,U);}var W=document.createEvent("UIEvent");W.initEvent("scrollmove");o.dispatchEvent(W);},_end:function(U){if(F&&U.touches.length!==0){return;}var S=this,aa=F?U.changedTouches[0]:U,V,Z,O={dist:0,time:0},M={dist:0,time:0},R=(U.timeStamp||Date.now())-S.startTime,W=S.x,T=S.y,Y,X,N,Q,P;delete S.dir;S._unbind(z);S._unbind(c);S._unbind(D);if(S.options.onBeforeScrollEnd){S.options.onBeforeScrollEnd.call(S,U);}if(S.zoomed){P=S.scale*S.lastScale;P=Math.max(S.options.zoomMin,P);P=Math.min(S.options.zoomMax,P);S.lastScale=P/S.scale;S.scale=P;S.x=S.originX-S.originX*S.lastScale+S.x;S.y=S.originY-S.originY*S.lastScale+S.y;S.scroller.style[r]="200ms";S.scroller.style[s]="translate("+S.x+"px,"+S.y+"px) scale("+S.scale+")"+J;S.zoomed=false;S.refresh();if(S.options.onZoomEnd){S.options.onZoomEnd.call(S,U);}return;}if(!S.moved){if(F){if(S.doubleTapTimer&&S.options.zoom){clearTimeout(S.doubleTapTimer);S.doubleTapTimer=null;if(S.options.onZoomStart){S.options.onZoomStart.call(S,U);}S.zoom(S.pointX,S.pointY,S.scale==1?S.options.doubleTapZoom:1);if(S.options.onZoomEnd){setTimeout(function(){S.options.onZoomEnd.call(S,U);},200);}}else{if(this.options.handleClick){S.doubleTapTimer=setTimeout(function(){S.doubleTapTimer=null;V=aa.target;while(V.nodeType!=1){V=V.parentNode;}if(V.tagName!="SELECT"&&V.tagName!="INPUT"&&V.tagName!="TEXTAREA"){Z=L.createEvent("MouseEvents");Z.initMouseEvent("click",true,true,U.view,1,aa.screenX,aa.screenY,aa.clientX,aa.clientY,U.ctrlKey,U.altKey,U.shiftKey,U.metaKey,0,null);Z._fake=true;V.dispatchEvent(Z);}},S.options.zoom?250:0);}}}S._resetPos(200);if(S.options.onTouchEnd){S.options.onTouchEnd.call(S,U);}return;}if(R<300&&S.options.momentum){O=W?S._momentum(W-S.startX,R,-S.x,S.scrollerW-S.wrapperW+S.x,S.options.bounce?S.wrapperW:0):O;M=T?S._momentum(T-S.startY,R,-S.y,(S.maxScrollY<0?S.scrollerH-S.wrapperH+S.y-S.minScrollY:0),S.options.bounce?S.wrapperH:0):M;W=S.x+O.dist;T=S.y+M.dist;if((S.x>0&&W>0)||(S.x<S.maxScrollX&&W<S.maxScrollX)){O={dist:0,time:0};}if((S.y>S.minScrollY&&T>S.minScrollY)||(S.y<S.maxScrollY&&T<S.maxScrollY)){M={dist:0,time:0};}}if(O.dist||M.dist){N=B.max(B.max(O.time,M.time),10);if(S.options.snap){Y=W-S.absStartX;X=T-S.absStartY;if(B.abs(Y)<S.options.snapThreshold&&B.abs(X)<S.options.snapThreshold){S.scrollTo(S.absStartX,S.absStartY,200);}else{Q=S._snap(W,T);W=Q.x;T=Q.y;N=B.max(Q.time,N);}}S.scrollTo(B.round(W),B.round(T),N);if(S.options.onTouchEnd){S.options.onTouchEnd.call(S,U);}return;}if(S.options.snap){Y=W-S.absStartX;X=T-S.absStartY;if(B.abs(Y)<S.options.snapThreshold&&B.abs(X)<S.options.snapThreshold){S.scrollTo(S.absStartX,S.absStartY,200);}else{Q=S._snap(S.x,S.y);if(Q.x!=S.x||Q.y!=S.y){S.scrollTo(Q.x,Q.y,Q.time);}}if(S.options.onTouchEnd){S.options.onTouchEnd.call(S,U);}return;}S._resetPos(200);if(S.options.onTouchEnd){S.options.onTouchEnd.call(S,U);}},_resetPos:function(O){var M=this,P=M.x>=0?0:M.x<M.maxScrollX?M.maxScrollX:M.x,N=M.y>=M.minScrollY||M.maxScrollY>0?M.minScrollY:M.y<M.maxScrollY?M.maxScrollY:M.y;if(P==M.x&&N==M.y){if(M.moved){M.moved=false;if(M.options.onScrollEnd){M.options.onScrollEnd.call(M);}}if(M.hScrollbar&&M.options.hideScrollbar){if(G=="webkit"){M.hScrollbarWrapper.style[f]="300ms";}M.hScrollbarWrapper.style.opacity="0";}if(M.vScrollbar&&M.options.hideScrollbar){if(G=="webkit"){M.vScrollbarWrapper.style[f]="300ms";}M.vScrollbarWrapper.style.opacity="0";}return;}M.scrollTo(P,N,O||0);},_wheel:function(R){var P=this,Q,O,N,M,S;if("wheelDeltaX" in R){Q=R.wheelDeltaX/12;O=R.wheelDeltaY/12;}else{if("wheelDelta" in R){Q=O=R.wheelDelta/12;}else{if("detail" in R){Q=O=-R.detail*3;}else{return;}}}if(P.options.wheelAction=="zoom"){S=P.scale*Math.pow(2,1/3*(O?O/Math.abs(O):0));if(S<P.options.zoomMin){S=P.options.zoomMin;}if(S>P.options.zoomMax){S=P.options.zoomMax;}if(S!=P.scale){if(!P.wheelZoomCount&&P.options.onZoomStart){P.options.onZoomStart.call(P,R);}P.wheelZoomCount++;P.zoom(R.pageX,R.pageY,S,400);setTimeout(function(){P.wheelZoomCount--;if(!P.wheelZoomCount&&P.options.onZoomEnd){P.options.onZoomEnd.call(P,R);}},400);}return;}N=P.x+Q;M=P.y+O;if(N>0){N=0;}else{if(N<P.maxScrollX){N=P.maxScrollX;}}if(M>P.minScrollY){M=P.minScrollY;}else{if(M<P.maxScrollY){M=P.maxScrollY;}}if(P.maxScrollY<0){P.scrollTo(N,M,0);}},_mouseout:function(N){var M=N.relatedTarget;if(!M){this._end(N);return;}while(M=M.parentNode){if(M==this.wrapper){return;}}this._end(N);},_transitionEnd:function(N){var M=this;if(N.target!=M.scroller){return;}M._unbind(a);M._startAni();},_startAni:function(){var S=this,N=S.x,M=S.y,Q=Date.now(),R,P,O;if(S.animating){return;}if(!S.steps.length){S._resetPos(400);return;}R=S.steps.shift();if(R.x==N&&R.y==M){R.time=0;}S.animating=true;S.moved=true;if(S.options.useTransition){S._transitionTime(R.time);S._pos(R.x,R.y);S.animating=false;if(R.time){S._bind(a);}else{S._resetPos(0);}return;}O=function(){var T=Date.now(),V,U;if(T>=Q+R.time){S._pos(R.x,R.y);S.animating=false;if(S.options.onAnimationEnd){S.options.onAnimationEnd.call(S);}S._startAni();return;}T=(T-Q)/R.time-1;P=B.sqrt(1-T*T);V=(R.x-N)*P+N;U=(R.y-M)*P+M;S._pos(V,U);if(S.animating){S.aniTime=w(O);}};O();},_transitionTime:function(M){M+="ms";this.scroller.style[r]=M;if(this.hScrollbar){this.hScrollbarIndicator.style[r]=M;}if(this.vScrollbar){this.vScrollbarIndicator.style[r]=M;}},_momentum:function(T,N,R,M,V){var S=0.0006,O=B.abs(T)/N,P=(O*O)/(2*S),U=0,Q=0;if(T>0&&P>R){Q=V/(6/(P/O*S));R=R+Q;O=O*R/P;P=R;}else{if(T<0&&P>M){Q=V/(6/(P/O*S));M=M+Q;O=O*M/P;P=M;}}P=P*(T<0?-1:1);U=O/S;return{dist:P,time:B.round(U)};},_offset:function(M){var O=-M.offsetLeft,N=-M.offsetTop;while(M=M.offsetParent){O-=M.offsetLeft;N-=M.offsetTop;}if(M!=this.wrapper){O*=this.scale;N*=this.scale;}return{left:O,top:N};},_snap:function(U,T){var R=this,Q,P,S,O,N,M;S=R.pagesX.length-1;for(Q=0,P=R.pagesX.length;Q<P;Q++){if(U>=R.pagesX[Q]){S=Q;break;}}if(S==R.currPageX&&S>0&&R.dirX<0){S--;}U=R.pagesX[S];N=B.abs(U-R.pagesX[R.currPageX]);N=N?B.abs(R.x-U)/N*500:0;R.currPageX=S;S=R.pagesY.length-1;for(Q=0;Q<S;Q++){if(T>=R.pagesY[Q]){S=Q;break;}}if(S==R.currPageY&&S>0&&R.dirY<0){S--;}T=R.pagesY[S];M=B.abs(T-R.pagesY[R.currPageY]);M=M?B.abs(R.y-T)/M*500:0;R.currPageY=S;O=B.round(B.max(N,M))||200;return{x:U,y:T,time:O};},_bind:function(O,N,M){(N||this.scroller).addEventListener(O,this,!!M);},_unbind:function(O,N,M){(N||this.scroller).removeEventListener(O,this,!!M);},destroy:function(){var M=this;M.scroller.style[s]="";M.hScrollbar=false;M.vScrollbar=false;M._scrollbar("h");M._scrollbar("v");M._unbind(l,o);M._unbind(b);M._unbind(z);M._unbind(c);M._unbind(D);if(!M.options.hasTouch){M._unbind("mouseout",M.wrapper);M._unbind(A);}if(M.options.useTransition){M._unbind(a);}if(M.options.checkDOMChanges){clearInterval(M.checkDOMTime);}if(M.options.onDestroy){M.options.onDestroy.call(M);}},refresh:function(){var P=this,R,O,M,N,S=0,Q=0;if(P.scale<P.options.zoomMin){P.scale=P.options.zoomMin;}P.wrapperW=P.wrapper.clientWidth||1;P.wrapperH=P.wrapper.clientHeight||1;P.minScrollY=-P.options.topOffset||0;P.scrollerW=B.round(P.scroller.offsetWidth*P.scale);P.scrollerH=B.round((P.scroller.offsetHeight+P.minScrollY)*P.scale);P.maxScrollX=P.wrapperW-P.scrollerW;P.maxScrollY=P.wrapperH-P.scrollerH+P.minScrollY;P.dirX=0;P.dirY=0;if(P.options.onRefresh){P.options.onRefresh.call(P);}P.hScroll=P.options.hScroll&&P.maxScrollX<0;P.vScroll=P.options.vScroll&&(!P.options.bounceLock&&!P.hScroll||P.scrollerH>P.wrapperH);P.hScrollbar=P.hScroll&&P.options.hScrollbar;P.vScrollbar=P.vScroll&&P.options.vScrollbar&&P.scrollerH>P.wrapperH;R=P._offset(P.wrapper);P.wrapperOffsetLeft=-R.left;P.wrapperOffsetTop=-R.top;if(typeof P.options.snap=="string"){P.pagesX=[];P.pagesY=[];N=P.scroller.querySelectorAll(P.options.snap);for(O=0,M=N.length;O<M;O++){S=P._offset(N[O]);S.left+=P.wrapperOffsetLeft;S.top+=P.wrapperOffsetTop;P.pagesX[O]=S.left<P.maxScrollX?P.maxScrollX:S.left*P.scale;P.pagesY[O]=S.top<P.maxScrollY?P.maxScrollY:S.top*P.scale;}}else{if(P.options.snap){P.pagesX=[];while(S>=P.maxScrollX){P.pagesX[Q]=S;S=S-P.wrapperW;Q++;}if(P.maxScrollX%P.wrapperW){P.pagesX[P.pagesX.length]=P.maxScrollX-P.pagesX[P.pagesX.length-1]+P.pagesX[P.pagesX.length-1];}S=0;Q=0;P.pagesY=[];while(S>=P.maxScrollY){P.pagesY[Q]=S;S=S-P.wrapperH;Q++;}if(P.maxScrollY%P.wrapperH){P.pagesY[P.pagesY.length]=P.maxScrollY-P.pagesY[P.pagesY.length-1]+P.pagesY[P.pagesY.length-1];}}}P._scrollbar("h");P._scrollbar("v");if(!P.zoomed){P.scroller.style[r]="0";P._resetPos(200);}},scrollTo:function(M,T,S,R){var Q=this,P=M,O,N;Q.stop();if(!P.length){P=[{x:M,y:T,time:S,relative:R}];}for(O=0,N=P.length;O<N;O++){if(P[O].relative){P[O].x=Q.x-P[O].x;P[O].y=Q.y-P[O].y;}Q.steps.push({x:P[O].x,y:P[O].y,time:P[O].time||0});}Q._startAni();},scrollToElement:function(M,O){var N=this,P;M=M.nodeType?M:N.scroller.querySelector(M);if(!M){return;}P=N._offset(M);P.left+=N.wrapperOffsetLeft;P.top+=N.wrapperOffsetTop;P.left=P.left>0?0:P.left<N.maxScrollX?N.maxScrollX:P.left;P.top=P.top>N.minScrollY?N.minScrollY:P.top<N.maxScrollY?N.maxScrollY:P.top;O=O===undefined?B.max(B.abs(P.left)*2,B.abs(P.top)*2):O;N.scrollTo(P.left,P.top,O);},scrollToPage:function(O,N,Q){var P=this,M,R;Q=Q===undefined?400:Q;if(P.options.onScrollStart){P.options.onScrollStart.call(P);}if(P.options.snap){O=O=="next"?P.currPageX+1:O=="prev"?P.currPageX-1:O;N=N=="next"?P.currPageY+1:N=="prev"?P.currPageY-1:N;O=O<0?0:O>P.pagesX.length-1?P.pagesX.length-1:O;N=N<0?0:N>P.pagesY.length-1?P.pagesY.length-1:N;P.currPageX=O;P.currPageY=N;M=P.pagesX[O];R=P.pagesY[N];}else{M=-P.wrapperW*O;R=-P.wrapperH*N;if(M<P.maxScrollX){M=P.maxScrollX;}if(R<P.maxScrollY){R=P.maxScrollY;}}P.scrollTo(M,R,Q);},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(z);this._unbind(c);this._unbind(D);},enable:function(){this.enabled=true;},stop:function(){if(this.options.useTransition){this._unbind(a);}else{v(this.aniTime);}this.steps=[];this.moved=false;this.animating=false;},zoom:function(M,R,Q,P){var N=this,O=Q/N.scale;if(!N.options.useTransform){return;}N.zoomed=true;P=P===undefined?200:P;M=M-N.wrapperOffsetLeft-N.x;R=R-N.wrapperOffsetTop-N.y;N.x=M-M*O+N.x;N.y=R-R*O+N.y;N.scale=Q;N.refresh();N.x=N.x>0?0:N.x<N.maxScrollX?N.maxScrollX:N.x;N.y=N.y>N.minScrollY?N.minScrollY:N.y<N.maxScrollY?N.maxScrollY:N.y;N.scroller.style[r]=P+"ms";N.scroller.style[s]="translate("+N.x+"px,"+N.y+"px) scale("+Q+")"+J;N.zoomed=false;},isReady:function(){return !this.moved&&!this.zoomed&&!this.animating;}};function y(M){if(G===""){return M;}M=M.charAt(0).toUpperCase()+M.substr(1);return G+M;}t=null;hike.defineClass("hike.util.Scroller",{statics:{create:function(N,M){return new C(N,M);}}});})(window,document);